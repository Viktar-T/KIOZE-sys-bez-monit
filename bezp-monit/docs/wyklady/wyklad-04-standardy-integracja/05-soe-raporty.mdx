---
title: "SOE i wymagania raportowe"
sidebar_position: 5
---

import { 
  SlideContainer, 
  Slide, 
  KeyPoints, 
  SupportingDetails, 
  InstructorNotes,
  VisualSeparator,
  LearningObjective,
  KeyConcept,
  Example
} from '@site/src/components/SlideComponents';
import { InteractiveQuiz } from '@site/src/components/InteractiveQuiz';

<LearningObjective>
Po tej sekcji student potrafi:
- ZdefiniowaÄ‡ SOE (Sequence of Events) i wyjaÅ›niÄ‡ jego rolÄ™ w analizie przyczynowej (root cause analysis)
- ZaprojektowaÄ‡ system rejestracji zdarzeÅ„ z wÅ‚aÅ›ciwÄ… synchronizacjÄ… czasu (Â±10-100 ms)
- PrzygotowaÄ‡ raporty regulacyjne (KPI dla OSD, environmental compliance) i komercyjne (SLA, O&M)
- ZapewniÄ‡ audytowalnoÅ›Ä‡ danych (immutability, digital signatures, retention policies)
</LearningObjective>

<SlideContainer>

<Slide title="ðŸ“‹ SOE (Sequence of Events) â€“ co to i dlaczego kluczowe?" type="info">

<KeyPoints title="ðŸ“‹ Definicja i znaczenie SOE">

**SOE (Sequence of Events)** to **chronologiczna lista zdarzeÅ„** (alarms, commands, status changes) z **precyzyjnymi timestampami**, uÅ¼ywana do:
- **Root cause analysis** (analiza przyczynowa) â€“ co spowodowaÅ‚o awariÄ™?
- **Post-mortem** po incydentach â€“ rekonstrukcja sekwencji
- **Compliance** â€“ dokumentacja dla audytÃ³w OSD/TSO
- **Optimization** â€“ identyfikacja patterns (powtarzajÄ…ce siÄ™ problemy)

**Bez SOE:**
- "Inwerter siÄ™ wyÅ‚Ä…czyÅ‚ o 14:23" â€“ ale DLACZEGO? Undervoltage? Overcurrent? Command od SCADA?
- NiemoÅ¼noÅ›Ä‡ ustalenia causa-effect relationship

**Z SOE (przykÅ‚ad):**
```
14:23:42.123  GRID_FREQ_LOW      (49.85 Hz, limit 49.8 Hz)   [Sensor: Meter01]
14:23:42.234  INV_UNDERFREQ_TRIP (Inverter 1 trip)           [IED: INV01]
14:23:42.456  INV_UNDERFREQ_TRIP (Inverter 2-10 trip)        [IED: INV02-10]
14:23:43.001  BREAKER_OPEN       (Main breaker opened)        [IED: XCBR_Main]
14:23:43.567  ALARM_FARM_OFFLINE (Farm status = FAULT)        [SCADA]
```

**Analiza:** Grid frequency drop (49.85 Hz) â†’ undervoltage protection triggered â†’ inverters tripped (111 ms later) â†’ main breaker opened (567 ms later) â†’ farm offline.

**Root cause:** Grid event (external), NIE farma fault. Action: No repair needed, auto-restart po grid recovery.

---

### **Wymagania dla SOE:**

**1. Timestamp precision (dokÅ‚adnoÅ›Ä‡ znacznikÃ³w czasu)**
- **Protection events** (relay trips): Â±1 ms (wymaga PTP lub GPS-synced clocks)
- **Operational events** (commands, setpoints): Â±10-100 ms (NTP wystarczy)
- **Alarms** (slow processes): Â±1 s (basic NTP)

**2. Kategoryzacja zdarzeÅ„:**

| Kategoria | Priorytet | PrzykÅ‚ady | Storage retention |
|-----------|-----------|-----------|-------------------|
| **Critical** (CRITICAL) | 0 (highest) | Protection trips, E-stop, fire alarm | 10+ lat |
| **Alarms** (ALARM) | 1 | Overvoltage, overcurrent, communication loss | 5 lat |
| **Warnings** (WARNING) | 2 | High temperature, low SoC, calibration due | 2 lata |
| **Operational** (INFO) | 3 | Commands, setpoints, status changes | 1 rok |
| **Debug** (DEBUG) | 4 | Detailed traces, heartbeats | 1 miesiÄ…c |

**3. Atrybuty kaÅ¼dego eventu:**
- **Timestamp**: UTC z precision (ISO 8601: 2023-10-08T14:23:42.123Z)
- **Source**: KtÃ³ry device/sensor (IED ID, sensor serial)
- **Event type**: Alarm code lub descriptive name
- **Value**: WartoÅ›Ä‡ ktÃ³ra triggered (np. 49.85 Hz dla FREQ_LOW)
- **Quality**: VALID/INVALID/SUSPECT
- **Severity**: CRITICAL/ALARM/WARNING/INFO
- **Acknowledged**: TRUE/FALSE (operator potwierdziÅ‚, Å¼e widziaÅ‚)

**4. PowiÄ…zanie z alarmami:**
- SOE to LOG (wszystko), Alarms to ACTIVE (wymagajÄ… akcji)
- Event moÅ¼e trigger alarm â†’ alarm ACKnowledged â†’ event logged, alarm cleared

</KeyPoints>

<SupportingDetails title="ðŸ”§ Implementacja SOE w systemach OZE">

### **Architektura zbierania zdarzeÅ„:**

```mermaid
graph TB
    subgraph "Edge (Field Devices)"
        INV[Inverters<br/>Events @ 1 ms precision]
        BESS[BESS BMS<br/>Thermal events]
        RELAY[Protection Relays<br/>Trip events]
        MET[Sensors<br/>Threshold crossings]
    end
    
    subgraph "Fog (Gateway/RTU)"
        GW[Event Collector<br/>NTP sync Â±10 ms]
        BUFFER[Circular Buffer<br/&gt;10k events]
    end
    
    subgraph "Cloud (SCADA/Historian)"
        DB[Event Database<br/>InfluxDB / SQL]
        SOE[SOE Analyzer<br/>Timeline view]
        ALARM[Alarm Manager<br/>Active alarms]
    end
    
    INV -->|Event stream<br/>Modbus, MQTT| GW
    BESS -->|CAN events| GW
    RELAY -->|IEC 61850 GOOSE| GW
    MET -->|Threshold events| GW
    
    GW --> BUFFER
    BUFFER -->|Batched upload<br/>every 10 s| DB
    
    DB --> SOE
    DB --> ALARM
    
    style RELAY fill:#ff9999
    style GW fill:#ffeb99
    style DB fill:#87ceeb
    style SOE fill:#90ee90
```

**Zbieranie @ Edge:**
- KaÅ¼de urzÄ…dzenie loguje events locally (circular buffer, ostatnie 1000-10000 events)
- Timestamp: Local RTC (Real-Time Clock), synced via NTP co 60 s
- Przekazywanie: Batch upload co 10-60 s (nie kaÅ¼dy event osobno â†’ reduce traffic)

**Agregacja @ Fog/Gateway:**
- Collect events z multiple devices
- Re-timestamp (jeÅ›li device clock unreliable) â†’ gateway clock (NTP-synced)
- Filter (deduplicate, suppress low-priority DEBUG events)
- Forward do cloud

**Storage @ Cloud:**
- Time-series database (InfluxDB) lub relational (PostgreSQL, SQL)
- Indexing: timestamp, device_id, event_type, severity
- Retention: 10 lat dla CRITICAL, 1 rok dla INFO

---

### **SOE query examples (InfluxDB Flux):**

**Query 1: Wszystkie eventy z ostatnich 24h (timeline):**
```flux
from(bucket: "events")
  |> range(start: -24h)
  |> filter(fn: (r) => r._measurement == "soe")
  |> sort(columns: ["_time"], desc: false)  // Chronological order
```

**Query 2: Only CRITICAL/ALARM (exclude INFO/DEBUG):**
```flux
from(bucket: "events")
  |> range(start: -7d)
  |> filter(fn: (r) => r.severity == "CRITICAL" or r.severity == "ALARM")
```

**Query 3: Events from specific device (Inverter 1):**
```flux
from(bucket: "events")
  |> range(start: -30d)
  |> filter(fn: (r) => r.device_id == "INV01")
  |> filter(fn: (r) => r.event_type =~ /TRIP|FAULT/)  // Regex match
```

**Query 4: Correlation (events within Â±1 s window):**
```python
# Python (pandas)
df = query_events(start="2023-10-08 14:23:00", end="2023-10-08 14:24:00")
df['time_diff'] = df['timestamp'].diff()  # Time between consecutive events

# Find events within 1 s of GRID_FREQ_LOW
trigger_event = df[df['event_type'] == 'GRID_FREQ_LOW'].iloc[0]
trigger_time = trigger_event['timestamp']

related = df[(df['timestamp'] >= trigger_time) & 
             (df['timestamp'] <= trigger_time + timedelta(seconds=1))]
# Result: Shows GRID_FREQ_LOW â†’ INV_TRIP (111 ms), INV_TRIP â†’ BREAKER_OPEN (445 ms)
```

</SupportingDetails>

<Example title="SOE analysis â€“ grid disturbance post-mortem">

**Incident: Farm PV 20 MWp, grid disturbance 8 October 2023, 14:23**

**SOE log (excerpt, 50 events total, pokazane top 15):**

| Timestamp (UTC) | Î”t (ms) | Event Type | Source | Value | Severity |
|-----------------|---------|------------|--------|-------|----------|
| 14:23:42.000 | â€” | GRID_VOLTAGE_HIGH | Meter01 | U_L1=111.5 kV (limit 110) | WARNING |
| 14:23:42.123 | 123 | GRID_FREQ_LOW | Meter01 | f=49.85 Hz (limit 49.8) | ALARM |
| 14:23:42.234 | 111 | INV_UNDERFREQ_TRIP | INV01 | Trip on f&lt;49.8 Hz | CRITICAL |
| 14:23:42.245 | 11 | INV_UNDERFREQ_TRIP | INV02 | Trip | CRITICAL |
| 14:23:42.267 | 22 | INV_UNDERFREQ_TRIP | INV03-10 | Trip (cascade) | CRITICAL |
| 14:23:43.001 | 734 | BREAKER_CMD_OPEN | SCADA | Manual command (operator) | INFO |
| 14:23:43.112 | 111 | BREAKER_OPENING | XCBR_Main | Breaker actuating | INFO |
| 14:23:43.567 | 455 | BREAKER_OPEN | XCBR_Main | Position = OPEN | ALARM |
| 14:23:43.678 | 111 | FARM_STATUS_FAULT | RTU | Status changed | ALARM |
| 14:23:44.001 | 323 | TELEMETRY_INVALID | RTU | P_AC quality=INVALID (no measurement) | WARNING |
| 14:24:15.234 | 31233 | GRID_FREQ_NORMAL | Meter01 | f=50.01 Hz (recovered) | INFO |
| 14:24:20.123 | 4889 | OPERATOR_CMD_RESTART | SCADA | Manual restart sequence | INFO |
| 14:24:25.456 | 5333 | BREAKER_CMD_CLOSE | SCADA | Close command | INFO |
| 14:24:25.789 | 333 | BREAKER_CLOSED | XCBR_Main | Position = CLOSED | INFO |
| 14:24:30.123 | 4334 | INV_STARTING | INV01-10 | Inverters restarting | INFO |

---

### **Analysis (root cause investigation):**

**Phase 1: Trigger identification (co byÅ‚o PIERWSZE?)**
- **First event**: GRID_VOLTAGE_HIGH @ 14:23:42.000 (111.5 kV)
- **123 ms pÃ³Åºniej**: GRID_FREQ_LOW (49.85 Hz)
- **Wniosek**: Grid disturbance (external cause), NOT farm fault

**Phase 2: Cascade analysis (jak siÄ™ rozprzestrzeniÅ‚o?)**
- Freq drop â†’ Inverter protection (underfrequency, grid code requirement) â†’ **ALL inverters tripped** within 145 ms (INV01 @ +111 ms, INV10 @ +256 ms)
- Operator decision (14:23:43.001, **734 ms po pierwszym trip**): Manual breaker open (safe-side, prevent re-energize podczas grid fault)

**Phase 3: Recovery**
- Grid stable @ 14:24:15.234 (33 s po incident start)
- Operator restart @ 14:24:20 (5 s po grid OK, careful approach)
- **Full reconnection**: 14:24:30 (48 s total recovery time)

**Timeline visualization:**
```
14:23:42.000  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> GRID VOLTAGE HIGH
14:23:42.123      â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> GRID FREQ LOW (trigger)
14:23:42.234         â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> INV01 TRIP (+111 ms)
14:23:42.267            â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> INV03-10 TRIP (+33 ms cascade)
14:23:43.001                      â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> OPERATOR CMD OPEN (+734 ms)
14:23:43.567                            â—â”€â”€â”€â”€> BREAKER OPEN (+566 ms actuate)
14:24:15.234                                          ...â—> GRID NORMAL (+32 s)
14:24:30.123                                              â—> RESTART COMPLETE (+15 s)
```

**Root cause:** External grid disturbance (transmission-level fault, 200 km away, per OSD report)

**Corrective action:** NONE needed dla farmy (protection worked correctly). OSD investigating transmission fault separately.

**Dokumentacja:**
- SOE report (PDF, 5 pages) sent to OSD within 24h (requirement)
- Analysis: Cause, timeline, actions taken, lessons
- Conclusion: Farm behavior compliant with grid code (protection settings correct)

</Example>

<InstructorNotes>

**Czas**: 14-16 min

**Przebieg**:
1. SOE definition i cel (3 min) â€“ co to, dlaczego kluczowe dla root cause
2. Wymagania (timestamp precision, kategoryzacja) (3 min)
3. Architektura zbierania (3 min) â€“ edge â†’ fog â†’ cloud, diagram
4. Case study (5 min) â€“ real SOE analysis, timeline visualization
5. Q&A (2 min)

**Punkty kluczowe**:
- **SOE to detective work** â€“ timestamps precision Â±10-100 ms pozwala ustaliÄ‡ causality
- **Without SOE**: Guessing (co byÅ‚o pierwsze?). Z SOE: Facts (precyzyjne 111 ms miÄ™dzy events)
- **Categorization** (CRITICAL/ALARM/WARNING/INFO) uÅ‚atwia filtering
- **Retention**: CRITICAL events 10+ lat (regulatory), DEBUG 1 miesiÄ…c (storage cost)

**Demonstracja praktyczna**:
- Grafana SOE timeline panel â€“ pokazuje events chronologically
- InfluxDB query (live) â€“ jak extract events dla analysis
- Post-mortem report (PDF example) â€“ jak wyglÄ…da dokumentacja dla OSD

**MateriaÅ‚y pomocnicze**:
- IEC 61850-7-3: Common data classes (Event models)
- Example SOE log (CSV/JSON format) â€“ real data anonymized
- Grafana Timeline panel documentation

**Typowe bÅ‚Ä™dy studenckie**:
- Logging wszystkiego jako INFO (brak categorization) â†’ trudne filtering
- Brak timestamp precision (tylko do sekund) â†’ niemoÅ¼noÅ›Ä‡ ustalenia order dla events &lt;1 s apart
- Storing SOE w plain text files (nie database) â†’ trudne queries, brak indexing

**Pytania studenckie**:
- Q: Czy SOE to to samo co alarm log?
- A: NIE. SOE = ALL events (w tym INFO/DEBUG), chronological. Alarm log = only ACTIVE alarms (require action). SOE âŠƒ Alarms (SOE is superset).

- Q: Jak dÅ‚ugo przechowywaÄ‡ SOE (retention)?
- A: Depends on severity: CRITICAL 10+ lat (regulatory), ALARM 5 lat, WARNING 2 lata, INFO 1 rok, DEBUG 1 miesiÄ…c. Trade-off: compliance vs. storage cost.

</InstructorNotes>

</Slide>

<VisualSeparator type="technical" />

<Slide title="ðŸ“Š Raporty regulacyjne i komercyjne" type="tip">

<KeyConcept title="Wymagania raportowe dla farm OZE">

### **1. Raporty dla OSD/TSO (regulacyjne, mandatory):**

**MiesiÄ™czne:**
- **Produkcja energii**: E_export (MWh), breakdown hourly/daily
- **Availability** (dostÄ™pnoÅ›Ä‡): % czasu operacyjnego (operational / (operational + faults))
- **Curtailment log**: Lista wszystkich curtailment events (czas, moc, przyczyna)
- **Quality metrics**: Data completeness, telemetry uptime
- **Incidents**: SOE reports dla wszystkich CRITICAL events (trips, faults)

**Kwartalne:**
- **Capacity Factor** (CF): Actual production / Theoretical maximum
- **Grid compliance**: Voltage/frequency compliance statistics (% w normach)
- **Reactive power support**: Q_AC statistics (dla voltage regulation)

**Roczne:**
- **Performance summary**: CF, PR (dla PV), availability trends
- **Equipment failures**: Liczba awarii, MTBF (Mean Time Between Failures), MTTR (Mean Time To Repair)
- **Environmental**: COâ‚‚ avoided, renewable energy certificates (RECs)

---

### **2. Raporty komercyjne (dla inwestorÃ³w, O&M contracts):**

**MiesiÄ™czne KPI reports:**

| KPI | Definicja | Target | Calculation | Frequency |
|-----|-----------|--------|-------------|-----------|
| **PR** (Performance Ratio) | E_actual / E_expected | &gt;80% (PV) | IEC 61724 | Monthly |
| **CF** (Capacity Factor) | E_actual / (P_rated Ã— hours) | &gt;25% (PV), &gt;35% (wind) | Simple | Monthly |
| **Availability** | Operational time / Total time | &gt;98% | SOE-based | Monthly |
| **MTBF** | Mean Time Between Failures | &gt;2000 h | Failure log | Quarterly |
| **MTTR** | Mean Time To Repair | &lt;24 h | Incident log | Quarterly |
| **Revenue** | E_export Ã— Price | Variable | Billing data | Monthly |
| **O&M costs** | Maintenance + Repairs | &lt;â‚¬15/kWp/year | Invoice data | Monthly |

**PrzykÅ‚ad PR calculation (IEC 61724):**

$$
PR = \frac{E_{actual}}{E_{reference}} = \frac{E_{actual}}{P_{rated} \times \sum \frac{G_{POA}}{G_{STC}} \times [1 + \gamma (T_{mod} - T_{STC})]}
$$

Gdzie:
- E_actual: Rzeczywista energia (MWh, z licznika)
- P_rated: Moc nominalna (kWp)
- G_POA: Irradiancja POA (W/mÂ², z pyranometru)
- G_STC: 1000 W/mÂ² (Standard Test Conditions)
- T_mod: Temperatura moduÅ‚Ã³w (Â°C, z PT1000)
- Î³: WspÃ³Å‚czynnik temperaturowy (-0.40%/Â°C typical)
- T_STC: 25Â°C

**Automated calculation (Python):**
```python
# Monthly PR calculation
def calculate_monthly_pr(month, year):
    # Fetch data from InfluxDB (15-min intervals)
    data = query_influx(
        measurement="pv_metrics",
        fields=["E_actual", "G_POA", "T_mod"],
        start=f"{year}-{month:02d}-01",
        end=f"{year}-{month+1:02d}-01"
    )
    
    # Filter VALID quality only
    data_valid = data[data['quality'] == 'VALID']
    
    # Calculate E_reference (expected energy)
    P_rated = 20000  # kWp
    gamma = -0.004   # /Â°C
    
    E_ref = 0
    for row in data_valid.itertuples():
        E_ref += P_rated * (row.G_POA / 1000) * (1 + gamma * (row.T_mod - 25)) * (15/60)  # 15-min interval â†’ hours
    
    # PR
    E_actual_total = data_valid['E_actual'].sum()
    PR = E_actual_total / E_ref if E_ref > 0 else None
    
    return {
        "month": month,
        "year": year,
        "E_actual_MWh": E_actual_total / 1000,
        "E_reference_MWh": E_ref / 1000,
        "PR": PR,
        "data_completeness": len(data_valid) / len(data) * 100
    }
```

**Report output (JSON):**
```json
{
  "month": 7,
  "year": 2023,
  "E_actual_MWh": 2845.3,
  "E_reference_MWh": 3420.8,
  "PR": 0.832,  // 83.2%
  "data_completeness": 98.5  // %
}
```

---

### **3. Environmental reporting (sprawozdawczoÅ›Ä‡ Å›rodowiskowa):**

**Roczne (dla KOBIZE, URE w Polsce):**
- **COâ‚‚ avoided**: E_renewable Ã— emission_factor_grid (ton COâ‚‚)
  - Emission factor (Polska 2023): ~0.7 ton COâ‚‚/MWh (coal-heavy grid)
  - Farm 20 MWp, E_annual = 22 GWh â†’ COâ‚‚ avoided: 22000 Ã— 0.7 = **15 400 ton/year**
- **Renewable Energy Certificates** (RECs): MWh produced, certificated
- **Water usage** (jeÅ›li cleaning): mÂ³/year (panel washing)
- **Waste**: Replaced modules, inverters (kg), recycling %

</KeyConcept>

<SupportingDetails title="ðŸ“‘ AudytowalnoÅ›Ä‡ i immutability">

### **Wymagania dla audit-ready data:**

**1. Immutability (nienaruszalnoÅ›Ä‡)**
- Raz zapisane dane **NIE MOGÄ„ byÄ‡ edytowane** (tylko append-only)
- Implementacja: 
  - **Write-once databases** (niektÃ³re time-series DB majÄ… ten tryb)
  - **Blockchain** (dla ultra-high security, ale overkill i expensive)
  - **Digital signatures** (hash kaÅ¼dego record, sign z private key)

**Example (append-only log):**
```
[2023-10-08 14:23:42.123] EVENT_ID=12345, TYPE=INV_TRIP, SOURCE=INV01, VALUE=..., HASH=abc123def...
[2023-10-08 14:23:43.567] EVENT_ID=12346, TYPE=BREAKER_OPEN, ..., PREV_HASH=abc123def, HASH=xyz789...
```

KaÅ¼dy record zawiera hash poprzedniego â†’ chain of trust (jak blockchain)

**2. Digital timestamps (trusted time source)**
- **RFC 3161** (Time-Stamp Protocol): ZewnÄ™trzny serwer TSA (Time-Stamp Authority) podpisuje timestamp
- **UÅ¼ycie**: Dla critical billing data, legal disputes
- **Koszt**: â‚¬0.01-0.10 per timestamp (commercial TSA) lub free (own PKI)

**3. Backup and retention:**
- **Daily backups**: Full (weekly), incremental (daily)
- **Off-site storage**: Cloud (S3, Azure Blob) + local (NAS)
- **Retention policy**: 
  - Critical data: 10 lat minimum (regulatory)
  - Financial data: 7 lat (tax law)
  - Operational: 1-5 lat (zaleÅ¼nie od SLA)
- **Test recovery**: Quarterly drills (verify backups actually work!)

**4. Access control and audit trail:**
- **RBAC** (Role-Based Access Control): Kto moÅ¼e read/write ktÃ³re dane
- **Audit log**: KaÅ¼dy access logged (who, when, what, from where)
- **PrzykÅ‚ad**:
```
[2023-10-08 10:15:23] USER=operator@farm.com, ACTION=READ, RESOURCE=/api/soe?start=2023-10-01, IP=192.168.1.50, RESULT=SUCCESS
[2023-10-08 10:20:45] USER=engineer@farm.com, ACTION=WRITE, RESOURCE=/api/config/inverter01, IP=192.168.1.60, RESULT=DENIED (insufficient permissions)
```

</SupportingDetails>

<Example title="Monthly KPI report â€“ farma PV 20 MWp (lipiec 2023)">

**Report structure (automated generation):**

### **Executive Summary:**

| Metric | Value | Target | Status |
|--------|-------|--------|--------|
| **Energy Production** | 2845 MWh | 2700 MWh (budget) | âœ… +5.4% |
| **Performance Ratio** | 83.2% | &gt;80% | âœ… PASS |
| **Availability** | 98.7% | &gt;98% | âœ… PASS |
| **Revenue** | â‚¬142 250 | â‚¬135 000 | âœ… +5.4% |
| **Curtailment** | 12.5 MWh (0.44%) | &lt;1% | âœ… PASS |
| **Incidents** | 2 (minor) | &lt;5 | âœ… PASS |

### **Detailed Production:**

**Daily profile (July average):**
- Sunrise generation start: 05:30 (local time)
- Peak production: 13:00, 18.5 MW (92% of rated)
- Sunset: 20:30
- Total: 91.8 MWh/day average (lipiec ma 31 dni â†’ 91.8 Ã— 31 = 2846 MWh âœ“)

**Weather correlation:**
- Clear sky days: 18 (58%)
- Partly cloudy: 10 (32%)
- Overcast/rain: 3 (10%)
- Average G_POA: 5.2 kWh/mÂ²/day (bardzo dobry dla lipiec w Polsce)

### **Availability breakdown:**

- **Operational**: 97.2% (30.1 dni equivalent)
- **Scheduled maintenance**: 1.0% (7.4 h, cleaning, inspection)
- **Unscheduled downtime**: 1.8% (13.4 h total)
  - Grid fault (external): 8 h (largest incident)
  - Inverter fault (INV03): 3 h (replaced DC fuse)
  - Communication loss (RTU): 2 h (fiber cut, switched to LTE)
  - Minor: 0.4 h

### **Incidents log:**

**Incident 1: Grid disturbance (8 July, 14:23)**
- Severity: CRITICAL
- Duration: 48 s (full recovery)
- Energy loss: 0.25 MWh (20 MW Ã— 48/3600 h)
- Root cause: External (transmission fault)
- Action: None (protection correct)

**Incident 2: Inverter INV03 fault (15 July, 09:12)**
- Severity: ALARM
- Duration: 3.2 h (detection â†’ repair)
- Energy loss: 0.6 MWh (2 MW Ã— 3.2 h)
- Root cause: DC fuse blown (overcurrent transient)
- Action: Replaced fuse, inspected string (OK)

### **Financial summary:**

- Production: 2845 MWh Ã— â‚¬50/MWh (average spot price) = **â‚¬142 250**
- O&M costs: â‚¬2500 (maintenance, repairs, monitoring)
- **Net revenue**: â‚¬142 250 - â‚¬2500 = **â‚¬139 750**
- **vs. Budget**: â‚¬135 000 (target) â†’ **+â‚¬4750 (+3.5%)** ðŸŽ‰

### **Environmental impact:**

- COâ‚‚ avoided: 2845 MWh Ã— 0.7 ton/MWh = **1992 ton COâ‚‚**
- Equivalent: 424 cars off road for 1 year (@ 4.7 ton/car/year)

---

**Report distribution:**
- **Investor**: Executive summary (1 page PDF)
- **OSD**: Full report (15 pages, compliance section)
- **O&M team**: Technical appendix (SOE logs, incident details)
- **Public**: Environmental impact (website, press release)

**Generation:** Automated (Python script + Jinja2 templates), runs 1st of each month, email delivery

</Example>

<InstructorNotes>

**Czas**: 16-18 min

**Przebieg**:
1. Typy raportÃ³w (4 min) â€“ regulatory (OSD), commercial (investor), environmental
2. KPI definitions (4 min) â€“ PR, CF, Availability, MTBF/MTTR
3. AudytowalnoÅ›Ä‡ (3 min) â€“ immutability, digital signatures, retention
4. Example monthly report (4 min) â€“ real structure, automated generation
5. Q&A (2 min)

**Punkty kluczowe**:
- **Raporty to NIE optional** â€“ grid codes require (OSD compliance), contracts require (investor/O&M SLA)
- **Automation CRITICAL** â€“ manual reports = errors, delays. Python scripts + templates = consistent, timely
- **PR calculation** according to IEC 61724 (not simplified) â€“ dla credibility z auditors
- **Environmental reporting** rosnÄ…ce znaczenie (ESG â€“ Environmental, Social, Governance metrics)

**Demonstracja praktyczna**:
- Example monthly report (PDF) â€“ pokazuje professional structure
- Python script (Jinja2 template rendering) â€“ jak generowaÄ‡ reports automated
- Grafana snapshot â†’ PDF export (dla appendices)

**MateriaÅ‚y pomocnicze**:
- IEC 61724-1:2017 â€“ Photovoltaic system performance (defines PR, CF calculations)
- Example O&M contract (SLA section, KPI definitions)
- KOBIZE reporting guidelines (Polish environmental agency)

**Typowe bÅ‚Ä™dy studenckie**:
- Simplified PR calculation (ignore temperature compensation) â†’ incorrect values
- Brak quality filtering (using INVALID data w KPI) â†’ overstated performance
- Manual report creation (Excel copy-paste) â†’ error-prone, time-consuming

**Pytania studenckie**:
- Q: Czy moÅ¼na uÅ¼yÄ‡ Grafana jako report tool (zamiast PDF)?
- A: Grafana ma PDF export (snapshot), ale: (1) formatting limited, (2) brak narrative text (tylko wykresy). Best: Grafana dla visualizations, Python/LaTeX dla comprehensive reports z analysis text.

- Q: Co to immutability i dlaczego waÅ¼ne?
- A: Dane raz zapisane NIE mogÄ… byÄ‡ zmienione (only append). WaÅ¼ne dla audits (prevent tampering, data integrity). W dispute legal (np. PR guarantee claim), immutable data = legally defensible.

</InstructorNotes>

</Slide>

<VisualSeparator type="default" />

<Slide title="ðŸ“ Quiz: SOE i reporting" type="info">

<InteractiveQuiz 
  questions={[
    {
      question: "SOE pokazuje dwa eventy: 'GRID_FREQ_LOW' @ 14:23:42.123, 'INV_TRIP' @ 14:23:42.234. Jaka jest rÃ³Å¼nica czasowa (Î”t)?",
      options: [
        "11 ms (234-123 w milisekundach)",
        "111 ms (0.234 - 0.123 = 0.111 s)",
        "1 s (zaokrÄ…glenie do sekund)",
        "Nie moÅ¼na obliczyÄ‡ (rÃ³Å¼ne time zones)"
      ],
      correctAnswer: 1,
      explanation: "Î”t = 14:23:42.234 - 14:23:42.123 = 0.111 s = 111 ms. Opcja (a) bÅ‚Ä™dnie interpretuje (234-123 = 111, ale to ms czÄ™Å›ci, nie seconds parts). Opcja (c) loses precision. Opcja (d) nieprawda (SOE zawsze UTC, no timezone issue)."
    },
    {
      question: "Farma miaÅ‚a operational time 725 h w miesiÄ…cu (31 dni Ã— 24 h = 744 h total). Jaka jest Availability?",
      options: [
        "97.4% (725/744)",
        "102.6% (725/706, assumed 30 days)",
        "95.0% (arbitrary)",
        "Nie moÅ¼na obliczyÄ‡ bez znajomoÅ›ci PR"
      ],
      correctAnswer: 0,
      explanation: "Availability = Operational / Total = 725 / 744 = 0.9745 = 97.45% â‰ˆ 97.4%. Opcja (b) uÅ¼ywa zÅ‚ej liczby dni (30 zamiast 31). Opcja (d) nieprawda (PR i Availability to rÃ³Å¼ne metrics, niezaleÅ¼ne)."
    },
    {
      question: "Co oznacza 'immutability' w kontekÅ›cie SOE i audit data?",
      options: [
        "Dane sÄ… szyfrowane (encrypted)",
        "Dane raz zapisane NIE mogÄ… byÄ‡ edytowane (only append-only) â†’ zapewnia integrity dla audits",
        "Dane sÄ… backupowane codziennie",
        "Dane majÄ… wielkÄ… importance (immutable = very important)"
      ],
      correctAnswer: 1,
      explanation: "Immutability = niezmiennoÅ›Ä‡, append-only. Raz zapisane nie moÅ¼na edit/delete â†’ tamper-proof. Opcja (a) to encryption (inna sprawa). Opcja (c) to backup (waÅ¼ne, ale nie immutability). Opcja (d) to nonsense (immutable â‰  important)."
    },
    {
      question: "KtÃ³ry KPI jest najbardziej kluczowy dla OSD/TSO (grid operator)?",
      options: [
        "PR (Performance Ratio) â€“ efektywnoÅ›Ä‡ systemu",
        "Revenue (przychÃ³d) â€“ financial performance",
        "Availability (dostÄ™pnoÅ›Ä‡) â€“ % czasu gdy farm jest dyspozycyjna dla grid",
        "O&M costs (koszty serwisu)"
      ],
      correctAnswer: 2,
      explanation: "Dla OSD/TSO: **Availability** to priority (czy farm jest available dla dispatch/curtailment?). PR (a) to performance (waÅ¼ne dla owner, nie dla OSD). Revenue (b) to commercial (nie grid concern). O&M costs (d) to internal (nie OSD concern). Grid operator cares: Can I count on this farm? â†’ Availability."
    },
    {
      question: "Event severity levels: DEBUG < INFO < WARNING < ALARM < CRITICAL. KtÃ³ra severity wymaga najdÅ‚uÅ¼szego retention (storage)?",
      options: [
        "DEBUG (bo duÅ¼o danych, potrzeba dÅ‚ugo dla analysis)",
        "INFO (most common, trzeba archiwizowaÄ‡ wszystko)",
        "CRITICAL (regulatory requirement: 10+ lat dla safety/protection events)",
        "Wszystkie rÃ³wno (retention nie zaleÅ¼y od severity)"
      ],
      correctAnswer: 2,
      explanation: "CRITICAL events (trips, faults, safety) â†’ retention 10+ lat (regulatory, legal). DEBUG â†’ 1 miesiÄ…c (storage cost, low value long-term). INFO â†’ 1 rok. WARNING â†’ 2 lata. Opcja (a/b) odwrotnie (less severe = shorter retention). Opcja (d) nieprawda (definitely depends on severity)."
    }
  ]}
/>

:::tip Rekomendacja po quizie
JeÅ›li uzyskaÅ‚eÅ› &lt;80% poprawnych odpowiedzi, przejrzyj sekcje o SOE timeline analysis (Î”t calculations), KPI definitions (PR, CF, Availability), i immutability concept. Zrozumienie reporting i audytowalnoÅ›ci jest kluczowe dla professional OZE operations.
:::

</Slide>

</SlideContainer>

---

## Podsumowanie i wnioski

**Kluczowe punkty z tej sekcji:**

1. **SOE (Sequence of Events)** to chronological log z precision timestamps (Â±10-100 ms) â†’ enables root cause analysis przez correlation (co byÅ‚o pierwsze? Î”t = 111 ms miÄ™dzy grid fault a inverter trip).

2. **Kategoryzacja zdarzeÅ„** (CRITICAL/ALARM/WARNING/INFO/DEBUG) + retention policies (10 lat dla CRITICAL, 1 miesiÄ…c dla DEBUG) â†’ balance compliance vs. storage cost.

3. **Raporty regulacyjne (OSD/TSO)** â€“ miesiÄ™czne/kwartalne/roczne:
   - Produkcja energii, availability, curtailment log
   - Grid compliance statistics
   - Incident reports (SOE analysis)

4. **Raporty komercyjne (investor/O&M)**:
   - KPI: PR (IEC 61724), CF, Availability, MTBF/MTTR
   - Revenue, O&M costs
   - **Automation** (Python + templates) eliminuje manual errors

5. **Environmental reporting**: COâ‚‚ avoided, RECs, waste/recycling â†’ rosnÄ…ce znaczenie (ESG metrics).

6. **AudytowalnoÅ›Ä‡**: Immutability (append-only), digital signatures, backup/retention (10+ lat), access control â†’ legally defensible data dla disputes.

**NastÄ™pne kroki:**
- Ä†wiczenie: Analiza SOE log (identify root cause z timestamp correlation)
- Lab hands-on: Automated report generation (Python + Jinja2 template)
- Przygotowanie do podsumowania WykÅ‚adu 04

---

**Dodatkowe zasoby:**
- **IEC 61724-1:2017**: Photovoltaic system performance monitoring (PR/CF calculations)
- **IEC 61850-7-3**: Common data classes (Event models)
- **RFC 3161**: Time-Stamp Protocol (digital timestamps)
- **Example templates**: Monthly KPI report (LaTeX, Jinja2)


