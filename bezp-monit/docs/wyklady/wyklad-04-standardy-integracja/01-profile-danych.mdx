---
title: "Profile danych dla PV, wiatru i BESS"
sidebar_position: 1
---

import { 
  SlideContainer, 
  Slide, 
  KeyPoints, 
  SupportingDetails, 
  InstructorNotes,
  VisualSeparator,
  LearningObjective,
  KeyConcept,
  Example
} from '@site/src/components/SlideComponents';
import { InteractiveQuiz } from '@site/src/components/InteractiveQuiz';

<LearningObjective>
Po tej sekcji student potrafi:
- Zidentyfikowaƒá kluczowe profile danych dla r√≥≈ºnych technologii OZE (SunSpec dla PV, IEC 61400-25 dla wiatru, BMS dla BESS)
- Zbudowaƒá s≈Çownik tag√≥w (tag dictionary) z normalizacjƒÖ jednostek, nazewnictwa i quality flags
- Zaprojektowaƒá wsp√≥lny model danych umo≈ºliwiajƒÖcy por√≥wnanie KPI miƒôdzy r√≥≈ºnymi instalacjami
- Zastosowaƒá best practices dla metadanych (time zones, calibration info, provenance)
</LearningObjective>

<SlideContainer>

<Slide title="üóÇÔ∏è Profile danych ‚Äî dlaczego potrzebujemy standaryzacji?" type="info">

<KeyPoints title="üìã Problem: R√≥≈ºnorodno≈õƒá producent√≥w i protoko≈Ç√≥w">

**Typowa farma OZE (hybrid PV + Wind + BESS) to zoo technologiczne:**

- **10+ producent√≥w**: Inwertery (SMA, Fronius, Huawei), BESS (Tesla, BYD, LG Chem), turbiny (Vestas, Siemens Gamesa)
- **5+ protoko≈Ç√≥w**: Modbus RTU/TCP, SunSpec, proprietary (Huawei FusionSolar), OPC UA, IEC 61850
- **R√≥≈ºne modele danych**: 
  - Producent A: "ActivePower_W" (W)
  - Producent B: "P_AC" (kW)
  - Producent C: "AC_Power" (MW)
  - ‚Üí **TEN SAM parametr, 3 r√≥≈ºne nazwy, 3 r√≥≈ºne jednostki!**

**Konsekwencje braku standaryzacji:**

1. **Niemo≈ºno≈õƒá agregacji danych** ‚Äì Jak zsumowaƒá moc, je≈õli jednostki r√≥≈ºne?
2. **B≈Çƒôdy w KPI** ‚Äì PR calculation wymaga sp√≥jnych danych (E_actual, G_POA, T_mod)
3. **Integration hell** ‚Äì Ka≈ºdy producent wymaga custom driver/parser
4. **Vendor lock-in** ‚Äì Trudno zmieniƒá producenta (data migration nightmare)
5. **Utrudnione por√≥wnania** ‚Äì Nie mo≈ºesz compare performance miƒôdzy farmami

**RozwiƒÖzanie: Profile danych (Data Profiles)**

**Data Profile** = Standardowy zestaw:
- **Punkt√≥w danych** (data points): Jakie wielko≈õci mierzyƒá
- **Nazewnictwa** (naming convention): Jednolite nazwy tag√≥w
- **Jednostek** (units): SI units lub inne standardowe
- **Typ√≥w danych** (data types): INT16, FLOAT32, ENUM, etc.
- **Semantyki** (semantics): Co dany tag oznacza, jak interpretowaƒá

**G≈Ç√≥wne profile dla OZE:**
- **PV**: SunSpec Alliance (Modbus maps + IEEE 1547 extensions)
- **Wind**: IEC 61400-25 (Logical Nodes based on IEC 61850)
- **BESS**: SunSpec (dla PCS/inverter) + proprietary BMS protocols
- **Hydro**: IEC 61850 (hydroelectric domain-specific LNs)
- **Generic**: IEC 61850 dla wszystkich (universal, ale complex)

</KeyPoints>

<SupportingDetails title="üéØ Korzy≈õci ze standaryzacji">

**1. Interoperability (interoperacyjno≈õƒá)**
- Multi-vendor installations "just work" (plug-and-play)
- Wymiana sprzƒôtu bez przebudowy ca≈Çego SCADA
- **Przyk≈Çad**: Farma PV 10 MWp z 5 producentami inwerter√≥w ‚Üí wszystkie m√≥wiƒÖ SunSpec ‚Üí jeden driver w SCADA

**2. Portability (przeno≈õno≈õƒá)**
- Konfiguracje SCADA/dashboards wielokrotnego u≈ºytku
- Templates dla nowych projekt√≥w
- **Przyk≈Çad**: Dashboard Grafana dla "SunSpec Inverter" dzia≈Ça z SMA, Fronius, Huawei bez zmian

**3. Comparability (por√≥wnywalno≈õƒá)**
- Benchmarking farm A vs. farm B (r√≥≈ºni producenci, ale ten sam profile)
- Fleet-wide analytics (portfolio 100+ farm)
- **Przyk≈Çad**: Investor por√≥wnuje PR miƒôdzy 50 farmami ‚Üí sp√≥jne dane

**4. Compliance (zgodno≈õƒá z normami)**
- IEEE 1547 (grid interconnection) wymaga SunSpec
- IEC 61850 wym√≥g dla medium/high voltage substations
- ISO 50001 (energy management) zaleca standardized data models

**5. Reduced integration costs**
- Generic drivers zamiast custom dla ka≈ºdego producenta
- **Oszczƒôdno≈õƒá: 50-80% dev time** w integracji
- **Przyk≈Çad**: Integracja 10 inwerter√≥w SunSpec = 2 dni. Bez SunSpec (proprietary) = 10 dni (1 dzie≈Ñ ka≈ºdy)

:::tip Dobra praktyka przemys≈Çowa
W specyfikacjach przetargowych (tender specifications) dla farm >1 MWp **wymagaj zgodno≈õci z profilem danych** (SunSpec dla PV, IEC 61400-25 dla wiatru). To eliminuje vendor lock-in i u≈Çatwia future expansion.
:::

</SupportingDetails>

<InstructorNotes>

**Czas**: 14-16 min

**Przebieg**:
1. Problem: Zoo technologiczne w OZE (3 min) ‚Äì przyk≈Çad r√≥≈ºnych nazw dla tej samej wielko≈õci
2. Czym sƒÖ data profiles (3 min) ‚Äì definicja, sk≈Çadniki
3. G≈Ç√≥wne profile dla OZE (4 min) ‚Äì SunSpec, IEC 61400-25, etc.
4. Korzy≈õci standaryzacji (3 min) ‚Äì interoperability, cost savings
5. Q&A (2 min)

**Punkty kluczowe**:
- **Standaryzacja to NIE zbƒôdna biurokracja** ‚Äì to practical cost savings (50-80% integration time)
- SunSpec to de facto standard dla PV (>90% producent√≥w inwerter√≥w wspiera)
- IEC 61850 to heavyweight (complex), ale universal dla energetyki
- Vendor lock-in to real problem ‚Äì standardy go eliminujƒÖ

**Demonstracja praktyczna**:
- Poka≈º 3 r√≥≈ºne inwertery (SMA, Fronius, Huawei) w SunSpec explorer ‚Äì te same registry numbers, r√≥≈ºni producenci
- Comparison: Proprietary Modbus map vs. SunSpec map (side-by-side)

**Materia≈Çy pomocnicze**:
- SunSpec Alliance: Information Models (free download, https://sunspec.org/specifications/)
- IEC 61400-25-2: Wind turbine communications ‚Äì Information models
- IEEE 1547-2018: Standard for Interconnecting Distributed Energy Resources (SunSpec mentioned)

**Typowe b≈Çƒôdy studenckie**:
- My≈õlenie, ≈ºe "Modbus to standard" ‚Äì NO! Modbus to protok√≥≈Ç, SunSpec to data model OVER Modbus
- Ignorowanie quality flags (valid/invalid) ‚Äì dane bez quality = ryzyko false decisions
- Brak metadata (units, timestamps) w tag dictionary

**Pytania studenckie**:
- Q: Czy wszyscy producenci wspierajƒÖ SunSpec?
- A: Wiƒôkszo≈õƒá (&gt;90% inwerter√≥w &gt;10 kW). Ale: ma≈Çe/cheap inverters (&lt;5 kW) czƒôsto majƒÖ tylko basic Modbus (non-SunSpec). W przetargach komercyjnych: SunSpec compliance obowiƒÖzkowy.

- Q: Co je≈õli producent nie wspiera standardu?
- A: (1) Gateway z custom driver (mapuje proprietary ‚Üí standard), (2) Push back w przetargu (wym√≥g compliance), (3) W ostateczno≈õci: accept vendor lock-in (know the risks).

</InstructorNotes>

</Slide>

<VisualSeparator type="technical" />

<Slide title="‚òÄÔ∏è SunSpec ‚Äì standard dla system√≥w PV" type="tip">

<KeyConcept title="SunSpec Alliance Information Models">

**SunSpec** to otwarty standard definiujƒÖcy:
- Modbus register maps dla urzƒÖdze≈Ñ PV (inwertery, liczniki, met sensors, trackers, BESS)
- Information models (data structures) zgodne z IEEE 1547
- Interoperacyjno≈õƒá multi-vendor

**Architektura SunSpec (Modbus registers):**

```mermaid
graph TB
    A[Base Address<br/>40000 lub 50000] --> B[Common Model<br/>Block 1<br/>40001-40069]
    B --> C[SunSpec ID<br/>0x53756e53<br/>'SunS']
    
    B --> D[Model 101<br/>Inverter Single Phase]
    B --> E[Model 103<br/>Inverter Three Phase]
    B --> F[Model 124<br/>Basic Storage]
    B --> G[Model 160<br/>Multiple MPPT]
    
    D --> H[Registers:<br/>AC Power, Voltage,<br/>Current, Frequency,<br/>Status...]
    E --> H
    F --> I[Registers:<br/>SoC, SoH, Charge/Discharge<br/>Power, Status...]
    G --> J[Registers:<br/>MPPT1-10 DC Voltage,<br/>Current, Power...]
    
    style A fill:#ffeb99
    style B fill:#87ceeb
    style C fill:#ffd700
    style H fill:#90ee90
    style I fill:#ffb6c1
```

**Kluczowe modele SunSpec:**

| Model # | Nazwa | Zastosowanie | Kluczowe data points |
|---------|-------|--------------|----------------------|
| **101** | Inverter (Single Phase) | Inwertery 1-fazowe | AC_Power, AC_Current, DC_Voltage, Status, Temp |
| **103** | Inverter (Three Phase) | Inwertery 3-fazowe | AC_Power (L1/L2/L3), AC_Current, PF, DC_Power, Event flags |
| **124** | Basic Storage Control | BESS/PCS | ChaState (Charging/Discharging), SoC, SoH, Charge_Power, Discharge_Power |
| **160** | Multiple MPPT Inverter | Stringinwertery | MPPT1-10: DC_Voltage, DC_Current, DC_Power, Status |
| **201** | Meter (Single Phase) | Liczniki 1-fazowe | Total_Energy, AC_Power, Voltage, Current, Frequency |
| **203** | Meter (Three Phase) | Liczniki 3-fazowe | Energy_Import/Export (L1/L2/L3), Power_Factor, THD |
| **302** | Irradiance | Pyranometry/sensors | Irradiance (W/m¬≤), Plane-of-Array angle, Module_Temp |
| **308** | Tracker Controller | Trackery 1-axis/2-axis | Azimuth, Zenith, Target_Azimuth, Status |

**Przyk≈Çad: SunSpec Model 103 (Inverter 3-Phase) ‚Äì wybrane rejestry:**

| Offset | Nazwa | Typ | Jednostka | Scale Factor | R/W | Opis |
|--------|-------|-----|-----------|--------------|-----|------|
| 0 | ID | UINT16 | ‚Äî | ‚Äî | R | Model ID = 103 |
| 1 | L | UINT16 | registers | ‚Äî | R | Block length (50 reg) |
| 2 | AC_Current | UINT16 | A | SF_AC_Current | R | AC Total Current |
| 3 | AC_CurrentA | UINT16 | A | SF_AC_Current | R | Phase A Current |
| ...| ... | ... | ... | ... | ... | ... |
| 14 | AC_Power | INT16 | W | SF_AC_Power | R | AC Power (total) |
| ...| ... | ... | ... | ... | ... | ... |
| 38 | DC_Power | INT16 | W | SF_DC_Power | R | DC Power Input |
| 40 | Temp_Cabinet | INT16 | ¬∞C | SF_Temp | R | Cabinet Temperature |
| ...| ... | ... | ... | ... | ... | ... |
| 48 | Status | ENUM16 | ‚Äî | ‚Äî | R | Operating State (OFF/SLEEPING/STARTING/MPPT/THROTTLED/SHUTDOWN/FAULT) |
| 50 | Event1 | BITFIELD32 | ‚Äî | ‚Äî | R | Event flags (Ground Fault, DC Over Volt, etc.) |

**Scale Factor (SF)**: Pozwala na r√≥≈ºne zakresy przy sta≈Çym typie danych
- Je≈õli SF_AC_Power = -1 (stored w osobnym rejestrze)
- AC_Power register value = 12500
- **Rzeczywista warto≈õƒá**: 12500 √ó 10^(-1) = 1250 W = **1.25 kW**

</KeyConcept>

<SupportingDetails title="üîß Implementacja SunSpec w SCADA">

**Procedura integracji:**

**Krok 1: Discovery (wykrywanie modeli)**
- Read base address + offset 0-2: Szukaj "SunS" signature (0x53756e53)
- Je≈õli found ‚Üí read Model ID (register nastƒôpny) i Length
- Iterate przez wszystkie modele (Common ‚Üí Model 103 ‚Üí Model 160 ‚Üí ...)

**Krok 2: Parsing (odczyt danych)**
```python
# Python example (pymodbus library)
from pymodbus.client import ModbusTcpClient

client = ModbusTcpClient('192.168.1.100', port=502)
client.connect()

# SunSpec base address (Modbus Holding Registers)
base_addr = 40000

# Read Common Block (length 69)
common = client.read_holding_registers(base_addr, 69, unit=1)
sunspec_id = (common.registers[0] << 16) | common.registers[1]  # Should be 0x53756e53

# Find Model 103 (Inverter 3-Phase)
offset = 69  # After Common Block
while offset < 200:
    model_id = client.read_holding_registers(base_addr + offset, 1, unit=1).registers[0]
    model_len = client.read_holding_registers(base_addr + offset + 1, 1, unit=1).registers[0]
    
    if model_id == 103:  # Found Inverter 3-Phase
        # Read full model
        model_data = client.read_holding_registers(base_addr + offset, model_len + 2, unit=1)
        
        # Extract AC_Power (offset 14 within model)
        ac_power_raw = model_data.registers[14]
        sf_ac_power = model_data.registers[xx]  # Scale factor register
        ac_power = ac_power_raw * (10 ** sf_ac_power)  # Real value in W
        
        print(f"AC Power: {ac_power} W")
        break
    
    offset += model_len + 2  # Next model
    if model_id == 0xFFFF:  # End marker
        break

client.close()
```

**Krok 3: Normalizacja i storage**
- Convert do SI units (wszystko w W, nie kW/MW)
- Add quality flag (check Status register: MPPT = valid, FAULT = invalid)
- Timestamp (UTC)
- Store w InfluxDB:
```
measurement: sunspec_inverter
tags: site=farm1, inverter_id=INV01, model=103
fields: ac_power=1250.0, dc_power=1280.0, status=4
timestamp: 2023-10-08T12:34:56Z
```

**Krok 4: Visualization (Grafana)**
```sql
-- InfluxDB query (Flux)
from(bucket: "solar")
  |> range(start: -24h)
  |> filter(fn: (r) => r._measurement == "sunspec_inverter")
  |> filter(fn: (r) => r._field == "ac_power")
  |> aggregateWindow(every: 5m, fn: mean)
```

</SupportingDetails>

<Example title="SunSpec tag dictionary ‚Äì farma PV 5 MWp">

**Inwentaryzacja urzƒÖdze≈Ñ:**
- 10√ó Inwertery 500 kW (SMA Sunny Central, SunSpec Model 103)
- 1√ó Licznik AC (Carlo Gavazzi EM340, SunSpec Model 203)
- 2√ó Pyranometry (NRG Systems, SunSpec Model 302)
- 1√ó Weather station (temp, wind ‚Äì SunSpec Model 307, 308)

**Normalized Tag Dictionary (excerpt):**

| Tag Name | SunSpec Model.Point | Description | Unit | Data Type | Quality Flag | Update Rate |
|----------|---------------------|-------------|------|-----------|--------------|-------------|
| `PV.INV01.AC_Power` | 103.AC_Power | AC Power Output (3-phase sum) | W | FLOAT32 | VALID/INVALID | 1 s |
| `PV.INV01.AC_Energy` | 103.AC_Energy_Lifetime | Cumulative Energy | Wh | UINT64 | VALID | 60 s |
| `PV.INV01.DC_Power` | 103.DC_Power | DC Power Input | W | FLOAT32 | VALID/INVALID | 1 s |
| `PV.INV01.Status` | 103.Status | Operating State | ENUM | ‚Äî | ‚Äî | 1 s |
| `PV.INV01.Temp_Cabinet` | 103.Temp_Cabinet | Cabinet Temperature | ¬∞C | FLOAT32 | VALID | 10 s |
| `PV.METER.Energy_Import` | 203.Total_Energy_Import | Grid Import (cumulative) | Wh | UINT64 | VALID | 60 s |
| `PV.METEO.Irradiance_POA` | 302.Irradiance | POA Irradiance | W/m¬≤ | FLOAT32 | VALID/INVALID/CALIBRATION_DUE | 1 s |
| `PV.METEO.Temp_Module` | 302.Module_Temp | Module Back Temperature | ¬∞C | FLOAT32 | VALID/INVALID | 10 s |

**Quality Flags (rozszerzone):**
- `VALID`: Sensor OK, data reliable
- `INVALID`: Sensor fault, communication error
- `SUSPECT`: Data questionable (outlier detected)
- `CALIBRATION_DUE`: Sensor overdue for calibration (warning, ale still logging)
- `MAINTENANCE`: Sensor in maintenance mode (ignore in KPI calculations)

**Metadata (per tag):**
- `calibration_last_date`: "2023-05-15"
- `calibration_due_date`: "2025-05-15"
- `sensor_serial`: "KZ-CMP11-45678"
- `data_source`: "sunspec_modbus"
- `timezone`: "UTC"

**Benefits:**
- ‚úÖ **Single Grafana dashboard** dzia≈Ça z wszystkimi 10 inwerterami (bez zmian)
- ‚úÖ **KPI calculations** (PR, Availability) automatyczne (sp√≥jne nazwy, jednostki)
- ‚úÖ **Easy expansion** ‚Äì dodanie 11-tego inwertera = 5 min configuration (nie 1 dzie≈Ñ custom integration)

</Example>

<InstructorNotes>

**Czas**: 16-18 min

**Przebieg**:
1. SunSpec architecture (5 min) ‚Äì Common Block + Models, discovery process
2. Przyk≈Çad Model 103 (4 min) ‚Äì om√≥w kluczowe rejestry, scale factors
3. Python kod (3 min) ‚Äì pokazuje live reading (je≈õli mo≈ºliwe, z prawdziwym inwerterem lub simulatorem)
4. Tag dictionary example (3 min) ‚Äì normalizacja nazw, quality flags
5. Q&A (2 min)

**Punkty kluczowe**:
- **SunSpec to Modbus + standardized register map** ‚Äì nie nowy protok√≥≈Ç, tylko convention
- Scale factors pozwalajƒÖ na flexible ranges (INT16 mo≈ºe reprezentowaƒá 0.1 W do 10 MW z odpowiednim SF)
- Quality flags sƒÖ KLUCZOWE ‚Äì dane bez quality = ryzyko (false alarms, bad KPI)
- Discovery process (szukanie "SunS") = plug-and-play (SCADA auto-detects urzƒÖdzenia)

**Demonstracja praktyczna**:
- SunSpec Modbus scanner (pymodbus script) ‚Äì live discovery inwertera
- Comparison: Modbus map SMA (proprietary, 200+ custom registers) vs. SunSpec (standardized)
- Grafana dashboard template dla SunSpec inverter (pokazuje reusability)

**Materia≈Çy pomocnicze**:
- SunSpec Information Models (https://sunspec.org/sunspec-modbus-specifications/) ‚Äì free download
- IEEE 1547-2018 (mentions SunSpec as reference implementation)
- pymodbus library (https://pymodbus.readthedocs.io/) ‚Äì Python SunSpec support
- SunSpec test tool (https://sunspec.org/sunspec-test-tool/) ‚Äì validator

**Typowe b≈Çƒôdy studenckie**:
- My≈õlenie, ≈ºe SunSpec to komunikacja (NO, to data model OVER Modbus)
- Ignorowanie scale factors ‚Äì warto≈õƒá raw bez SF = nonsense
- Brak quality flags w database ‚Üí dane INVALID traktowane jako VALID

**Pytania studenckie**:
- Q: Czy SunSpec dzia≈Ça tylko z Modbus?
- A: Pierwotnie TAK (Modbus TCP/RTU). Ale: nowsze SunSpec models sƒÖ mapped do OPC UA (SunSpec OPC UA Companion Spec, 2020). Flexibility!

- Q: Co je≈õli inwerter ma SunSpec + proprietary registers (advanced features)?
- A: Common pattern. SunSpec = minimum required (grid compliance), proprietary = value-add (advanced diagnostics, OEM-specific). Read oba.

</InstructorNotes>

</Slide>

<VisualSeparator type="default" />

<Slide title="üå¨Ô∏è IEC 61400-25 ‚Äì standard dla turbin wiatrowych" type="info">

<KeyConcept title="Wind Power Plant Communications (IEC 61400-25 series)">

**IEC 61400-25** (czƒô≈õci 1-6) definiuje komunikacjƒô dla farm wiatrowych, bazujƒÖc na **IEC 61850** (substation automation).

**Logical Nodes (LN) dla turbin:**

| Logical Node | Domena | Opis | Przyk≈Çadowe Data Objects |
|--------------|--------|------|--------------------------|
| **WTUR** | Wind TURbine | G≈Ç√≥wny LN turbiny | `WTUR.OutPwrSt` (output power status), `WTUR.TurSt` (turbine state) |
| **WROT** | Wind ROTor | Rotor i ≈Çopaty | `WROT.RotSpd` (rotor speed RPM), `WROT.PitchAngle` (pitch angle ¬∞) |
| **WNAC** | Wind NACelle | Gondola (nacelle) | `WNAC.YawAngle` (yaw angle ¬∞), `WNAC.Temp` (temp gondoli) |
| **WGEN** | Wind GENerator | Generator | `WGEN.GenSpd` (generator speed), `WGEN.Temp` (temp uzwoje≈Ñ) |
| **WTRM** | Wind TRansforMer | Transformator | `WTRM.PwrIn` (power input), `WTRM.Temp` (temp oleju) |
| **WALM** | Wind ALarMs | Alarmy i events | `WALM.AlmSt` (alarm status), `WALM.EvtLog` (event log) |
| **MMXU** | Measurements MUltipleX | Pomiary elektryczne (generic z 61850) | `MMXU.TotW` (total active power), `MMXU.Hz` (frequency) |

**Hierarchia LN w turbinie:**

```
WTUR (Wind Turbine General)
‚îú‚îÄ‚îÄ WROT (Rotor)
‚îú‚îÄ‚îÄ WNAC (Nacelle)
‚îÇ   ‚îú‚îÄ‚îÄ WGEN (Generator)
‚îÇ   ‚îú‚îÄ‚îÄ WGBX (Gearbox) [je≈õli ma]
‚îÇ   ‚îî‚îÄ‚îÄ WCNV (Converter/PCS)
‚îú‚îÄ‚îÄ WTRM (Transformer)
‚îî‚îÄ‚îÄ WALM (Alarms)
```

**Data Objects (DO) i Data Attributes (DA):**

Przyk≈Çad: `WROT.RotSpd` (Rotor Speed)
- `RotSpd.mag.f` (magnitude, float): 15.2 rpm
- `RotSpd.q` (quality): VALID
- `RotSpd.t` (timestamp): 2023-10-08T12:34:56.123Z
- `RotSpd.units` (units): SIUnit code for rpm

</KeyConcept>

<SupportingDetails title="üîç Mapowanie IEC 61400-25 ‚Üí praktyczne tagi">

**Translation layer (dla InfluxDB/Grafana):**

| IEC 61400-25 LN.DO | Normalized Tag | Unit | Description |
|--------------------|----------------|------|-------------|
| `WTUR.OutPwrSt.mag.f` | `Wind.T01.Power_AC` | W | Output power |
| `WROT.RotSpd.mag.f` | `Wind.T01.Rotor_Speed` | rpm | Rotor speed |
| `WROT.PitchAngle.mag.f` | `Wind.T01.Pitch_Angle` | ¬∞ | Blade pitch |
| `WNAC.YawAngle.mag.f` | `Wind.T01.Yaw_Angle` | ¬∞ | Nacelle yaw |
| `WGEN.GenSpd.mag.f` | `Wind.T01.Generator_Speed` | rpm | Generator speed |
| `WGEN.Temp.mag.f` | `Wind.T01.Generator_Temp` | ¬∞C | Winding temperature |
| `WALM.AlmSt` | `Wind.T01.Alarm_Status` | BITFIELD | Active alarms |
| `MMXU.Hz.mag.f` | `Wind.T01.Grid_Frequency` | Hz | Grid frequency |

**Quality flag inheritance:**
- IEC 61400-25 `q` attribute ‚Üí `_quality` suffix w InfluxDB
- `Wind.T01.Power_AC` (value)
- `Wind.T01.Power_AC_quality` (VALID/INVALID/SUSPECT)

</SupportingDetails>

<Example title="WROT.RotSpd anomaly detection ‚Äì case study">

**Farma wiatrowa 50 MW (25 turbin √ó 2 MW)**

**Data points monitorowane:**
- `WROT.RotSpd` (rotor speed): 10-18 rpm (normalny zakres)
- `WGEN.GenSpd` (generator speed): 1400-1550 rpm
- `WTUR.OutPwrSt` (power output): 0-2000 kW

**Anomalia wykryta (sierpie≈Ñ 2023, turbina T12):**
- `WROT.RotSpd` = 16.5 rpm (normalny)
- `WGEN.GenSpd` = **1200 rpm** (oczekiwane ~1500 rpm przy 16.5 rpm rotor, gearbox ratio 1:91)
- `WTUR.OutPwrSt` = 1200 kW (zamiast expected ~1800 kW)

**Diagnosis:**
- Gearbox slippage lub miscount w encoder
- **Root cause**: Uszkodzenie przek≈Çadni (gear tooth spalling) ‚Üí zmienne ratio

**Action:**
- Shutdown turbiny, inspekcja (oil analysis pokaza≈Ça metal particles)
- Wymiana gearbox (planowana, 300 000 EUR + 3 tygodnie downtime)

**Jak IEC 61400-25 pom√≥g≈Ç:**
- Standardized LNs (`WROT.RotSpd`, `WGEN.GenSpd`) ‚Üí easy to correlate
- Quality flags: Generator encoder = VALID, ratio out of range ‚Üí automatic SUSPECT flag
- SOE (Sequence of Events) timestamp precision ¬±10 ms ‚Üí clear diagnosis timeline

**Savings:**
- Early detection (3 miesiƒÖce przed catastrophic failure) ‚Üí planowana wymiana zamiast emergency (savings ~100 000 EUR downtime costs)

</Example>

<InstructorNotes>

**Czas**: 14-16 min

**Przebieg**:
1. IEC 61400-25 introduction (3 min) ‚Äì based on IEC 61850, wind-specific LNs
2. Logical Nodes overview (5 min) ‚Äì WTUR, WROT, WNAC, WGEN, om√≥w hierarchiƒô
3. Mapowanie do praktycznych tag√≥w (3 min) ‚Äì translation layer dla InfluxDB
4. Case study: Anomaly detection (3 min) ‚Äì pokazuje value of standardization
5. Q&A (2 min)

**Punkty kluczowe**:
- **IEC 61400-25 = IEC 61850 + wind domain extensions** ‚Äì reuses proven technology
- Logical Nodes to semantic model (WROT.RotSpd ma meaning, nie tylko "register_123")
- Quality attributes (q, t) sƒÖ integrated ‚Äì ka≈ºda warto≈õƒá ma jako≈õƒá i timestamp
- Standard u≈Çatwia fleet management (25 turbin, 50 turbin, 100 turbin ‚Äì ten sam model)

**Demonstracja praktyczna**:
- Poka≈º IEC 61850 SCL file (System Configuration Language) ‚Äì XML definition of LNs
- OPC UA client (UAExpert) reading IEC 61400-25 nodes ‚Äì live browse
- Grafana dashboard dla farm wiatrowej (wszystkie turbiny, standardized tags)

**Materia≈Çy pomocnicze**:
- IEC 61400-25-2:2015 ‚Äì Information models
- IEC 61400-25-6:2016 ‚Äì Condition monitoring
- Example SCL file dla turbiny (XML, annotated)

**Typowe b≈Çƒôdy studenckie**:
- Mylenie IEC 61400 (design standard dla turbin) z IEC 61400-25 (communication standard)
- My≈õlenie, ≈ºe IEC 61850 to tylko dla electrical substations ‚Äì NO! Also wind, hydro, solar (IEC 61850-7-420, -7-410)
- Ignorowanie `.q` quality attribute ‚Äì dane bez quality check = ryzyko

**Pytania studenckie**:
- Q: Czy ma≈Çe turbiny (&lt;500 kW) u≈ºywajƒÖ IEC 61400-25?
- A: Rzadko (overkill, koszt). Ma≈Çe turbiny: Modbus (proprietary lub SunSpec Model 101 adapted). IEC 61400-25 dla &gt;1 MW i farm.

- Q: Co to SCL (System Configuration Language)?
- A: XML format definiujƒÖcy IEC 61850/61400-25 configuration. Exported z engineering tools (e.g., Siemens DIGSI, ABB PCM600), imported do SCADA. Eliminuje manual configuration.

</InstructorNotes>

</Slide>

<VisualSeparator type="default" />

<Slide title="üîã BESS (Battery Energy Storage System) ‚Äì profile danych" type="success">

<KeyPoints title="üìã Wyzwania modelowania BESS">

**BESS to hybrid system:**
- **BMS (Battery Management System)**: ZarzƒÖdza ogniwami, modu≈Çami, bezpiecze≈Ñstwem
- **PCS (Power Conversion System)**: Inwerter/converter (DC ‚Üî AC)
- **EMS (Energy Management System)**: Optymalizuje charging/discharging strategies

**Ka≈ºda warstwa ma w≈Çasny protok√≥≈Ç:**
- BMS: CAN bus (internal), Modbus (external), czƒôsto proprietary (Tesla, BYD)
- PCS: SunSpec Model 124 (Basic Storage), Model 126 (Lithium-Ion detailed)
- EMS: REST API, MQTT, OPC UA (control setpoints)

**Kluczowe data points:**

| Kategoria | Tag examples | Unit | Krytyczno≈õƒá | Update rate |
|-----------|--------------|------|-------------|-------------|
| **State of Charge** | `BESS.SoC`, `BESS.SoC_usable` | % | HIGH (billing, control) | 1-10 s |
| **State of Health** | `BESS.SoH` | % | MEDIUM (trending) | 1 h - 1 dzie≈Ñ |
| **Voltages** | `BESS.V_cell_min`, `BESS.V_cell_max`, `BESS.V_cell_avg`, `BESS.V_stack` | V | HIGH (safety) | 1 s |
| **Currents** | `BESS.I_charge`, `BESS.I_discharge`, `BESS.I_max_continuous` | A | HIGH (control, safety) | 1 s |
| **Temperatures** | `BESS.T_cell_min`, `BESS.T_cell_max`, `BESS.T_cell_avg`, `BESS.ŒîT_max` | ¬∞C | CRITICAL (thermal runaway!) | 1 s |
| **Power** | `BESS.P_charge`, `BESS.P_discharge`, `BESS.P_loss` | W | HIGH (billing) | 1 s |
| **Energy** | `BESS.E_charged_total`, `BESS.E_discharged_total`, `BESS.E_throughput` | Wh | MEDIUM (aging) | 1 min |
| **Status/Alarms** | `BESS.Status` (IDLE/CHARGING/DISCHARGING/FAULT), `BESS.Alarms` (bitfield) | ENUM | CRITICAL (safety) | 1 s |
| **Safety** | `BESS.Contactors_Status`, `BESS.Isolation_Resistance`, `BESS.Smoke_Detected` | ‚Äî / MŒ© / BOOL | CRITICAL | 1 s |

**Thermal runaway indicators (MUST monitor):**
- ŒîT_max (max cell temp difference): Threshold <5¬∞C (normal), >10¬∞C (WARNING), >15¬∞C (ALARM ‚Üí shutdown)
- dT/dt (rate of temperature rise): >5¬∞C/min ‚Üí immediate shutdown
- V_cell_min divergence: Je≈õli 1 cell <2.5 V (others ~3.7 V) ‚Üí fault

</KeyPoints>

<SupportingDetails title="üß™ SunSpec Model 124 vs. Model 126">

### **Model 124: Basic Storage Control (uproszczony)**

**Data points (20 registers):**
- `ChaState` (Charging State): OFF / EMPTY / DISCHARGING / CHARGING / FULL / HOLDING / TESTING
- `SoC` (State of Charge): 0-100%
- `SoH` (State of Health): 0-100%
- `Charge_Power` (W): Current charging power
- `Max_Charge_Power` (W): Maximum capability
- Similar dla discharge

**Zastosowanie**: Prosty BESS, basic control, residential (10-50 kWh)

---

### **Model 126: Lithium-Ion String (zaawansowany)**

**Data points (60+ registers):**
- Wszystko z Model 124 PLUS:
- `Cell_Voltage_Min/Max/Avg` (V)
- `Cell_Temp_Min/Max/Avg` (¬∞C)
- `Module_Voltage` (array): Napiƒôcia poszczeg√≥lnych modu≈Ç√≥w
- `String_Current` (A)
- `Contactor_Status` (bitfield): Main+, Main-, Pre-charge, status ka≈ºdego
- `Insulation_Resistance` (MŒ©)
- `Event_Flags` (bitfield32): OverVoltage, UnderVoltage, OverTemp, OverCurrent, etc.

**Zastosowanie**: Commercial/utility BESS (>100 kWh), safety-critical, grid-tied

---

### **Proprietary BMS additions (beyond SunSpec):**

Producenci (Tesla Powerpack, BYD Battery-Box) dodajƒÖ:
- Individual cell voltages (100-1000 cells) ‚Üí massive data (nie w SunSpec, tylko OEM protocol)
- Detailed thermal model (20-50 temp sensors per rack)
- Balancing status (kt√≥ra cell jest balancingowana)
- Lifecycle analytics (cycles, calendar aging, projected SoH)

**Integration approach:**
1. **SunSpec dla PCS** (AC side) ‚Üí standard grid interface
2. **Modbus/OPC UA dla aggregate BMS data** ‚Üí monitoring (SoC, SoH, alarms)
3. **Proprietary dla detailed diagnostics** ‚Üí O&M, root cause analysis

</SupportingDetails>

<Example title="Hybrid PV+BESS tag dictionary ‚Äì projekt integracji">

**System: 2 MWp PV + 1 MWh BESS (peak shaving + time-shift)**

**Wsp√≥lny model danych:**

```yaml
# Common KPI tags (cross-technology)
Site:
  Site_Power_AC: W           # Sum PV + BESS (positive = generation, negative = consumption)
  Site_Energy_Import: Wh     # Cumulative from grid
  Site_Energy_Export: Wh     # Cumulative to grid
  Site_PR: dimensionless     # Performance Ratio (PV-specific, but site-level)
  Site_Availability: %       # (PV_avail √ó PV_share + BESS_avail √ó BESS_share)

# PV subsystem (SunSpec)
PV:
  PV_Power_AC: W             # Sum all inverters (SunSpec Model 103.AC_Power)
  PV_Power_DC: W             # Sum DC input
  PV_Energy_Total: Wh        # Cumulative lifetime
  PV_Irradiance_POA: W/m¬≤    # SunSpec Model 302
  PV_Temp_Module: ¬∞C         # SunSpec Model 302
  PV_Status: ENUM            # Aggregated (all inverters MPPT = OK, any FAULT = FAULT)

# BESS subsystem (SunSpec + proprietary)
BESS:
  BESS_SoC: %                # State of Charge (SunSpec 124/126)
  BESS_SoH: %                # State of Health (long-term aging)
  BESS_Power: W              # Positive = discharging (generation), negative = charging (load)
  BESS_Energy_Charged: Wh    # Cumulative charged
  BESS_Energy_Discharged: Wh # Cumulative discharged
  BESS_Temp_Max: ¬∞C          # Max cell temp (safety-critical)
  BESS_Status: ENUM          # IDLE / CHARGING / DISCHARGING / FAULT
  BESS_Alarms: BITFIELD      # Over-temp, under-voltage, etc.

# Grid interconnection
Grid:
  Grid_Voltage_L1/L2/L3: V
  Grid_Frequency: Hz
  Grid_Power: W              # Positive = import, negative = export
  Grid_PF: dimensionless     # Power factor
```

**Normalizacja jednostek (SI standard):**
- **Moc**: Wszystko w W (nie kW, MW, mW) ‚Üí ≈Çatwa agregacja
- **Energia**: Wszystko w Wh (nie kWh, MWh, J) ‚Üí sp√≥jno≈õƒá
- **Temperatura**: ¬∞C (IEC convention, nie K ani ¬∞F)
- **Prƒôdko≈õƒá wiatru**: m/s (not km/h, mph, knots)

**Naming convention:**
- Format: `<System>.<Device>.<Parameter>`
- CamelCase dla parametr√≥w (AC_Power, Rotor_Speed)
- Units w metadata, NIE w nazwie (tj. "Power_kW" = Z≈ÅE, "Power_AC" + unit: "W" = DOBRE)

**Rezultat:**
- ‚úÖ Wszystkie dane w InfluxDB z sp√≥jnymi tagami
- ‚úÖ KPI calculations (PR, round-trip efficiency, peak shaving performance) automated
- ‚úÖ Grafana dashboards reusable (1 dashboard dla wszystkich 50 farm w portfolio)

</Example>

<InstructorNotes>

**Czas**: 12-14 min

**Przebieg**:
1. Wyzwania BESS (3 min) ‚Äì BMS + PCS + EMS, r√≥≈ºne warstwy
2. IEC 61400-25 dla wiatru (4 min) ‚Äì Logical Nodes, mapowanie
3. Hybrid PV+BESS tag dictionary (4 min) ‚Äì pokazuje integracjƒô
4. Q&A (2 min)

**Punkty kluczowe**:
- **BESS to most complex** (3 warstwy, proprietary BMS, safety-critical)
- **IEC 61400-25 reuses IEC 61850** ‚Äì nie trzeba uczyƒá siƒô nowego, je≈õli znasz 61850
- **Naming convention** (System.Device.Parameter) u≈Çatwia organizacjƒô (nie chaos "tag_1234")
- **SI units** (W, Wh, ¬∞C) zawsze ‚Äì konwersje w visualization layer, nie w storage

**Demonstracja praktyczna**:
- Poka≈º YAML/JSON tag dictionary (actual file z projektu)
- InfluxDB query: `SELECT mean("Power_AC") FROM "PV" WHERE time > now() - 1h GROUP BY time(5m)`
- Grafana variable: `$inverter` (dropdown z wszystkich inverter√≥w, template reusable)

**Materia≈Çy pomocnicze**:
- SunSpec Model 124/126 specification (free PDF)
- IEC 61400-25-6 (condition monitoring extensions)
- Example tag dictionary (GitHub repo: https://github.com/.../oze-tag-dictionary)

**Typowe b≈Çƒôdy studenckie**:
- Mixing units w tej samej kategorii (AC_Power w W, DC_Power w kW) ‚Äì NO! Consistent units
- Brak naming convention ‚Üí tags like "inv1_p", "inverter2_power", "pw_inv_03" (chaos)
- Quality flags jako osobna tabela (instead of attribute) ‚Äì trudne queries

**Pytania studenckie**:
- Q: Czy trzeba tworzyƒá tag dictionary dla ka≈ºdej instalacji od zera?
- A: NO! Start z template (generic PV, Wind, BESS), customize. Wiele organizacji O&M ma corporate standard (wszystkie farmy u≈ºywajƒÖ tego samego).

- Q: Co z legacy installations (przed SunSpec/61400-25)?
- A: Gateway approach: Legacy device ‚Üí custom driver ‚Üí normalizacja ‚Üí standard tags. Koszt: 1-3 dni dev per device type. Ale: future devices ju≈º standard ‚Üí marginal effort.

</InstructorNotes>

</Slide>

<VisualSeparator type="default" />

<Slide title="üìù Quiz: Profile danych" type="info">

<InteractiveQuiz 
  questions={[
    {
      question: "Co jest g≈Ç√≥wnƒÖ zaletƒÖ stosowania SunSpec w instalacjach PV multi-vendor?",
      options: [
        "SunSpec jest szybszy ni≈º proprietary Modbus",
        "SunSpec zapewnia interoperacyjno≈õƒá ‚Äì jeden driver SCADA dzia≈Ça z wszystkimi producentami wspierajƒÖcymi standard",
        "SunSpec jest ta≈Ñszy (nie wymaga licencji)",
        "SunSpec automatycznie oblicza KPI (PR, Availability)"
      ],
      correctAnswer: 1,
      explanation: "G≈Ç√≥wna zaleta SunSpec to interoperability (interoperacyjno≈õƒá) ‚Äì standardized register maps = generic SCADA driver works with SMA, Fronius, Huawei, etc. bez custom integration. Opcja (a) nieprawda (performance taki sam). Opcja (c) czƒô≈õciowo prawda (SunSpec Alliance membership ~$500-5000, ale spec free). Opcja (d) nieprawda (KPI w aplikacji, nie w protokole)."
    },
    {
      question: "W IEC 61400-25 (turbiny wiatrowe), co reprezentuje Logical Node 'WROT'?",
      options: [
        "Wind ROTor ‚Äì rotor i ≈Çopaty (rotor speed, pitch angle)",
        "Wind ROTation ‚Äì obr√≥t gondoli (yaw system)",
        "Wind ROTational energy ‚Äì energia kinetyczna",
        "Wind ROT detection ‚Äì wykrywanie uszkodze≈Ñ"
      ],
      correctAnswer: 0,
      explanation: "WROT = Wind ROTor. Zawiera data objects dla rotor speed, pitch angle, azimuth. WNAC to nacelle (w tym yaw). WR OT nie jest nazwƒÖ LN dla energia/uszkodze≈Ñ."
    },
    {
      question: "Tag dictionary zawiera: 'PV.INV01.AC_Power' (W), 'PV.INV02.AC_Power' (kW). Co jest Z≈ÅEGO w tej konfiguracji?",
      options: [
        "Nazwy tag√≥w sƒÖ za d≈Çugie (powinny byƒá 'P1', 'P2')",
        "Mieszane jednostki (W vs. kW) ‚Äì trudna agregacja, ryzyko b≈Çƒôd√≥w calculation",
        "Brak quality flags",
        "Naming convention CamelCase (powinien byƒá snake_case)"
      ],
      correctAnswer: 1,
      explanation: "Mixing units to cardinal sin w tag dictionaries. Wszystkie AC_Power powinny byƒá w W (lub wszystkie w kW, ale sp√≥jnie!). Agregacja wymaga conversion ‚Üí ryzyko b≈Çƒôd√≥w. Opcja (c) prawda (quality wa≈ºne), ale nie b≈ÇƒÖd w *tej* konfiguracji (pytanie o units). Opcja (d) to styl (CamelCase vs. snake_case, oba OK je≈õli consistent)."
    },
    {
      question: "BESS ma SoC = 85%, SoH = 92%. Co oznacza r√≥≈ºnica miƒôdzy tymi parametrami?",
      options: [
        "SoC i SoH to to samo (85% i 92% to b≈ÇƒÖd pomiaru)",
        "SoC = current charge level (85% of current capacity), SoH = capacity health (92% of original capacity), czyli rzeczywista energia = 0.85 √ó 0.92 √ó E_nominal",
        "SoC to State of Charge, SoH to State of Heat (temperatura)",
        "92% > 85% to impossible (SoH zawsze ‚â§ SoC)"
      ],
      correctAnswer: 1,
      explanation: "SoC (State of Charge) = ile obecnie na≈Çadowane wzglƒôdem bie≈ºƒÖcej capacity. SoH (State of Health) = degradacja capacity wzglƒôdem original (aging). BESS aged do 92% (straci≈Ço 8% capacity), obecnie charged do 85% z tej 92%. Opcja (c) nieprawda (SoH = Health, nie Heat). Opcja (d) nieprawda (SoH i SoC sƒÖ niezale≈ºne)."
    },
    {
      question: "Dlaczego quality flags (VALID/INVALID/SUSPECT) sƒÖ kluczowe w tagach danych?",
      options: [
        "Quality flags sƒÖ opcjonalne (nice to have)",
        "Quality flags pozwalajƒÖ na filtrowanie z≈Çych danych w KPI calculations ‚Äì dane INVALID nie powinny wp≈Çywaƒá na PR/Availability",
        "Quality flags s≈Çu≈ºƒÖ tylko do debugowania (nie sƒÖ u≈ºywane w production)",
        "Quality flags sƒÖ wymogiem prawnym (GDPR)"
      ],
      correctAnswer: 1,
      explanation: "Quality flags to must-have. Sensor fault ‚Üí INVALID ‚Üí KPI calculation SKIP ten data point (inaczej: false alarms, incorrect PR). Opcja (a) dangerous thinking. Opcja (c) nieprawda (production u≈ºywa quality dla reliability). Opcja (d) nieprawda (GDPR to privacy, nie quality)."
    }
  ]}
/>

:::tip Rekomendacja po quizie
Je≈õli uzyska≈Çe≈õ <80% poprawnych odpowiedzi, przejrzyj sekcje o SunSpec (Modbus register maps), IEC 61400-25 (Logical Nodes), i mixed units problem. Zrozumienie standaryzacji danych jest fundamentem interoperacyjnych system√≥w OZE.
:::

</Slide>

</SlideContainer>

---

## Podsumowanie i wnioski

**Kluczowe punkty z tej sekcji:**

1. **Profile danych to standard definiujƒÖcy**: data points, naming, units, types, semantics ‚Üí eliminuje integration hell i vendor lock-in.

2. **G≈Ç√≥wne standardy OZE:**
   - **PV**: SunSpec (Modbus maps, >90% wsparcia producent√≥w)
   - **Wind**: IEC 61400-25 (Logical Nodes based on IEC 61850)
   - **BESS**: SunSpec Model 124/126 (PCS) + proprietary BMS
   - **Generic**: IEC 61850 (universal, complex)

3. **Korzy≈õci**: Interoperability (multi-vendor), portability (dashboards reusable), comparability (benchmarking), compliance (IEEE 1547, ISO 50001), cost savings (50-80% integration time).

4. **Tag dictionary essentials:**
   - Naming convention: System.Device.Parameter (np. PV.INV01.AC_Power)
   - **SI units** konsystentnie (W, Wh, ¬∞C, m/s)
   - **Quality flags** obowiƒÖzkowe (VALID/INVALID/SUSPECT)
   - **Metadata**: calibration dates, sensor serials, time zones (UTC!)

5. **BESS = most complex**: 3 warstwy (BMS, PCS, EMS), thermal runaway monitoring CRITICAL (ŒîT, dT/dt thresholds).

**Nastƒôpne kroki:**
- ƒÜwiczenie: Stworzenie tag dictionary dla instalacji hybrid (PV + Wind + BESS)
- Przygotowanie do nastƒôpnej sekcji: IEC 61850 i IEC 60870-5-104 (deep dive w protoko≈Çy energetyczne)

---

**Dodatkowe zasoby:**
- **SunSpec Alliance**: https://sunspec.org/ ‚Äì specyfikacje, testery, certyfikacje
- **IEC 61400-25** series (parts 1-6) ‚Äì Wind power plant communications
- **IEEE 1547-2018**: Interconnecting DER with electric power systems
- **Example projects**: https://github.com/sunspec/ ‚Äì Python libraries, tools



