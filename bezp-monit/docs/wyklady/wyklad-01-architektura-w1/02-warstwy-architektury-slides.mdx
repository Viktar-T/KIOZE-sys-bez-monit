---
title: "Warstwy architektury: edgeâ€“fogâ€“cloud - Prezentacja"
sidebar_position: 2
---

import { 
  SlideContainer, 
  Slide, 
  KeyPoints, 
  SupportingDetails, 
  InstructorNotes,
  VisualSeparator,
  InfoBox,
  WarningBox,
  SuccessBox
} from '@site/src/components/SlideComponents';

<SlideContainer>

<Slide title="ğŸ—ï¸ Architektura edgeâ€“fogâ€“cloud w monitoringu OZE" type="info">

<KeyPoints title="ğŸ“‹ Cele uczenia">
- ğŸ¯ **Charakterystyka trzech warstw**: Edge, Fog, Cloud i ich funkcje
- ğŸ”„ **Decyzje architektoniczne** wpÅ‚ywajÄ…ce na niezawodnoÅ›Ä‡ i opÃ³Åºnienia
- ğŸ’¾ **Strategie retencji danych** na poszczegÃ³lnych poziomach
- ğŸ”— **PrzepÅ‚yw danych** miÄ™dzy warstwami i protokoÅ‚y komunikacyjne
</KeyPoints>

<SupportingDetails title="ğŸ”‘ Kluczowe pojÄ™cia">
- **Edge**: NajbliÅ¼ej czujnikÃ³w, reakcje < 100 ms
- **Fog**: Lokalna konsolidacja, analityka near-real-time
- **Cloud**: DÅ‚ugoterminowe skÅ‚adowanie, ML/AI, raporty
</SupportingDetails>

<InstructorNotes>
Rozpoczynamy drugÄ… czÄ™Å›Ä‡ wykÅ‚adu o architekturze systemÃ³w monitoringu. Dzisiaj poznamy **trzy warstwyâ€”edge, fog i cloud**â€”ktÃ³re wspÃ³lnie tworzÄ… nowoczesny system monitoringu OZE. KaÅ¼da warstwa ma swojÄ… unikalnÄ… rolÄ™ i odpowiada na konkretne wymagania: **edge zapewnia szybkoÅ›Ä‡ reakcji milisekundowÄ…**, fog agreguje dane lokalnie i wykonuje analitykÄ™ near-real-time, cloud umoÅ¼liwia dÅ‚ugoterminowÄ… analitykÄ™ i uczenie maszynowe.

To nie teoriaâ€”**kaÅ¼da warstwa rozwiÄ…zuje realne problemy biznesowe**: opÃ³Åºnienia dla bezpieczeÅ„stwa, koszty transferu danych, niezawodnoÅ›Ä‡ przy utracie Å‚Ä…cznoÅ›ci. Zobaczycie przykÅ‚ady z rzeczywistych instalacji.

Zapytajcie na poczÄ…tek: "Dlaczego nie moÅ¼na wysyÅ‚aÄ‡ wszystkich danych bezpoÅ›rednio do chmury?" To uruchomi dyskusjÄ™ o Å‚Ä…cznoÅ›ci i kosztach.
</InstructorNotes>

</Slide>

<VisualSeparator type="technical" />

<Slide title="ğŸŒ Dlaczego warstwowa architektura?" type="tip">

<KeyPoints title="ğŸ’¡ Powody ewolucji do architektury rozproszonej">
- ğŸ“Š **Skala**: TysiÄ…ce punktÃ³w pomiarowych w farmach PV i wiatrowych
- ğŸ“¡ **ÅÄ…cznoÅ›Ä‡**: Transfer TB danych kosztowny, Å‚Ä…cznoÅ›Ä‡ nie zawsze dostÄ™pna
- âš¡ **OpÃ³Åºnienia**: ReguÅ‚y bezpieczeÅ„stwa wymagajÄ… reakcji w milisekundach
- ğŸ›¡ï¸ **NiezawodnoÅ›Ä‡**: Utrata Å‚Ä…cznoÅ›ci z cloud nie moÅ¼e sparaliÅ¼owaÄ‡ kontroli
- ğŸ”’ **BezpieczeÅ„stwo**: Segregacja OT/IT zgodnie z IEC 62443
</KeyPoints>

<InfoBox>
**Model Purdue (ISA-95) w OZE**

- **Edge** â‰ˆ Poziomy 0â€“1 (czujniki + akwizycja + lokalne PLC)
- **Fog** â‰ˆ Poziomy 2â€“3 (SCADA, HMI, analityka krÃ³tkotermowa)
- **Cloud** â‰ˆ Poziom 4+ (zarzÄ…dzanie flotÄ…, long-term analytics, ERP)
</InfoBox>

<InstructorNotes>
Ewolucja architektury byÅ‚a napÄ™dzana konkretnymi problemami. WspÃ³Å‚czesne farmy PV to dziesiÄ…tki tysiÄ™cy punktÃ³w pomiarowychâ€”**przesyÅ‚anie wszystkich surowych danych do chmury przez 4G/5G kosztowaÅ‚oby fortunÄ™**. Transfer terabajtÃ³w? Nierealistyczny.

WprowadÅºcie Model Purdueâ€”**standard przemysÅ‚owy ISA-95 definiujÄ…cy hierarchiÄ™ automatyki**. PokaÅ¼cie, jak edge, fog i cloud mapujÄ… siÄ™ na jego poziomy. To pokazuje studentom, Å¼e nie wymyÅ›liliÅ›my niczego nowego, tylko zaadaptowaliÅ›my sprawdzone wzorce z przemysÅ‚u.

Kluczowy argument: **bezpieczeÅ„stwo wymaga lokalnych reakcji w milisekundach**. OdciÄ™cie zasilania przy Å‚uku elektrycznym nie moÅ¼e czekaÄ‡ na chmurÄ™. Dla maÅ‚ych instalacji domowych niekoniecznie trzeba trzech warstw, ale nawet tam inwerter to edge z lokalnÄ… logikÄ… MPPT.
</InstructorNotes>

</Slide>

<VisualSeparator type="energy" />

<Slide title="ğŸ”¹ Warstwa Edge: Blisko czujnikÃ³w i sterownikÃ³w" type="info">

<KeyPoints title="ğŸ¯ Funkcje warstwy Edge">
- ğŸ“¡ **Akwizycja danych**: Zbieranie surowych sygnaÅ‚Ã³w (1â€“10 Hz, CMS 10â€“50 kHz)
- ğŸ” **Filtracja i walidacja**: Usuwanie szumÃ³w, walidacja zakresÃ³w fizycznych
- ğŸ“Š **Normalizacja jednostek**: Wâ†’kW, Whâ†’kWh, Â°Fâ†’Â°C
- ğŸ’¾ **Buforowanie**: Lokalny bufor 1â€“24h, store-and-forward po utracie Å‚Ä…cznoÅ›ci
- ğŸš¨ **Lokalne alarmy**: Progi statyczne, interlock logic, reakcja < 100 ms
</KeyPoints>

<WarningBox>
**Safety-critical logic must run locally!**

Emergency stop, AFCI, interlock logic **nie mogÄ… czekaÄ‡ na chmurÄ™**. OpÃ³Åºnienie do cloud: 100â€“500 ms + ryzyko utraty Å‚Ä…cznoÅ›ci. Reakcja musi byÄ‡ < 100 ms.
</WarningBox>

<InstructorNotes>
Warstwa edge to **pierwszy punkt kontaktu miÄ™dzy Å›wiatem fizycznym a cyfrowym**. To nie tylko czytanie z czujnikaâ€”edge wykonuje inteligentne przetwarzanie: filtracjÄ™ antyaliasingowÄ…, walidacjÄ™ zakresÃ³w, normalizacjÄ™ jednostek. **Store-and-forward to kluczowa funkcja** dla lokalizacji o sÅ‚abej Å‚Ä…cznoÅ›ci.

PrzykÅ‚ad: gateway IoT w gÃ³rach traci Å‚Ä…cznoÅ›Ä‡ LTE przez trzy godziny. Bufor przechowuje 180 rekordÃ³w minutowych, po przywrÃ³ceniu Å‚Ä…cznoÅ›ci wysyÅ‚a je partiami. **Bez buforowania stracilibyÅ›my wszystkie dane**.

BezpieczeÅ„stwo to priorytet absolutny. Temperatura BESS powyÅ¼ej 60Â°C? **Edge zatrzymuje Å‚adowanie natychmiast**, nie czeka na fog czy cloud. JeÅ›li macie Raspberry Pi z HAT Modbus, pokaÅ¼cieâ€”studenci uwielbiajÄ… prawdziwy hardware. Koszt: 300 euro plus 15 euro miesiÄ™cznie za 4G.
</InstructorNotes>

</Slide>

<VisualSeparator type="data" />

<Slide title="ğŸ”¹ Edge: PrzykÅ‚ad z praktyki" type="success">

<SuccessBox>
**Konfiguracja edge gateway: Farma PV 1 MW**

**Hardware**: Raspberry Pi 4 (4 GB RAM) + HAT Modbus RTU

**Funkcje**:
- ğŸ“Š Zbieranie z 4 inverterÃ³w (SMA) przez Modbus TCP, co 10s
- ğŸ”„ Normalizacja: moc AC W â†’ kW
- âœ… Walidacja: odrzucanie PR > 1.2 (bÅ‚Ä™dy danych)
- ğŸ’¾ Bufor: SQLite, 48h danych
- ğŸ“¡ MQTT do fog: agregacja 1-min, topic `pv/site-001/inverters/{id}/power`
- ğŸš¨ Alarm: moc AC = 0 przy irradiancji > 200 W/mÂ² przez 5 min â†’ SMS

**Koszt**: â‚¬300 hardware + â‚¬15/miesiÄ…c (4G)
</SuccessBox>

<SupportingDetails title="âš™ï¸ Ograniczenia Edge">
- ğŸ–¥ï¸ **CPU/RAM ograniczone**: ARM Cortex-A9, 512 MBâ€“2 GB RAM
- ğŸ” **Brak kontekstu globalnego**: Widzi tylko lokalne dane (jedna turbina)
- ğŸ”§ **TrudnoÅ›Ä‡ aktualizacji**: Firmware update na 100 gatewayach to wyzwanie
</SupportingDetails>

<InstructorNotes>
Rzeczywisty przykÅ‚ad z farmy PV 1 MW. Raspberry Pi 4 z HAT Modbus RTU to popularny wybÃ³râ€”tani, potÄ™Å¼ny, Å›wietna spoÅ‚ecznoÅ›Ä‡ open-source. **Funkcje sÄ… konkretne i testowalne**: zbieranie co 10 sekund, agregacja przed wysÅ‚aniem przez MQTT, lokalny alarm SMS gdy inverter nie produkuje mimo sÅ‚oÅ„ca.

ZwrÃ³Ä‡cie uwagÄ™ na **bufor 48 godzin**â€”dwa razy wiÄ™cej niÅ¼ typowe 24h, daje margines bezpieczeÅ„stwa. SQLite to doskonaÅ‚y wybÃ³r: lekki, bezserwerowy, niezawodny. MQTT topic hierarchiczny `pv/site-001/inverters/{id}/power` umoÅ¼liwia subskrybowanie wildcardami.

Koszt 300 euro to niewiele dla farmy wartej milion. **Ograniczenia teÅ¼ sÄ… waÅ¼ne**: ARM Cortex nie uruchomi zaawansowanych modeli ML, brak kontekstu globalnego miÄ™dzy urzÄ…dzeniami, aktualizacje firmware na setkach gatewayÃ³w to wyzwanie. Dlatego potrzebujemy fog i cloud.
</InstructorNotes>

</Slide>

<VisualSeparator type="technical" />

<Slide title="ğŸ”¸ Warstwa Fog: Lokalna konsolidacja i analityka" type="info">

<KeyPoints title="ğŸ¯ Funkcje warstwy Fog">
- ğŸ”— **Agregacja ÅºrÃ³deÅ‚**: Dane z dziesiÄ…tek do setek urzÄ…dzeÅ„ edge
- ğŸ·ï¸ **Normalizacja tagÃ³w**: Jednolita nomenklatura (IEC 61850)
- ğŸ’¾ **Historian**: SzczegÃ³Å‚owe dane 7â€“30 dni (InfluxDB, TimescaleDB)
- ğŸ“Š **Analityka near-RT**: Kalkulacja KPI, detekcja anomalii, HMI lokalne
- â˜ï¸ **Cache i sync**: Agregacja do cloud (15-min), buforowanie przy utracie Å‚Ä…cznoÅ›ci
</KeyPoints>

<InfoBox>
**Fog vs. Edge: Jak rozrÃ³Å¼niÄ‡?**

- Fog **agreguje dane z wielu ÅºrÃ³deÅ‚** + lokalna baza danych
- Edge **zbiera z jednego urzÄ…dzenia** + tylko bufor

Granica jest pÅ‚ynna w maÅ‚ych instalacjach!
</InfoBox>

<InstructorNotes>
Fog to **"mÃ³zg lokalny" instalacji**â€”widzi caÅ‚oÅ›Ä‡ i podejmuje decyzje wymagajÄ…ce kontekstu wielu urzÄ…dzeÅ„. Farma PV 10 MW to 40 inverterÃ³w plus stacje pogodowe, fog agreguje wszystko. **Normalizacja tagÃ³w jest krytyczna**: producenci uÅ¼ywajÄ… rÃ³Å¼nych nazw, fog mapuje wszystko do jednolitej struktury IEC 61850.

Historian to narzÄ™dzie analityczne, nie backup. InfluxDB przechowuje szczegÃ³Å‚owe dane 1-sekundowe przez 7-30 dniâ€”**wystarczajÄ…co dÅ‚ugo do analiz awarii bez obciÄ…Å¼ania cloud**. Po tym okresie agregacja do 15-minut i wysyÅ‚ka do cloud.

Fog oblicza KPI real-time: PR co 15 minut dla kaÅ¼dego invertera. PR spada poniÅ¼ej 75% gdy inne majÄ… 85%? Alarm "Suspected underperformance". **Open-source wygraÅ‚ w OZE**: InfluxDB, Grafana, Node-RED to de facto standardy. Dla maÅ‚ych instalacji moÅ¼na pominÄ…Ä‡ fog, ale tracicie near-RT analytics.
</InstructorNotes>

</Slide>

<VisualSeparator type="data" />

<Slide title="ğŸ”¸ Fog: PrzykÅ‚ad biogazownia 1 MW" type="success">

<SuccessBox>
**Architektura fog: Biogazownia 1 MW**

**Hardware**: Dell Edge Gateway 5100 (Intel Atom x5, 8 GB RAM, 128 GB SSD)

**Funkcje**:
1. ğŸ”— **Agregacja**: PLC Siemens S7-1200 przez OPC UA
   - 50 tagÃ³w: temperatury, przepÅ‚ywy CHâ‚„/Hâ‚‚S, ciÅ›nienia
   - CzÄ™stotliwoÅ›Ä‡: 5s
2. ğŸ’¾ **Historian**: InfluxDB 2.x, retencja 30 dni (szczegÃ³Å‚owe), 1 rok (15-min)
3. ğŸ“Š **Analityka**: OEE co 1h, detekcja anomalii CHâ‚„ < 50%
4. ğŸ“ˆ **Prognoza**: ARIMA dla produkcji energii 24h, uruchamiana co 6h
5. ğŸ–¥ï¸ **HMI**: Grafana dashboard (touchscreen 10" w control room)
6. â˜ï¸ **Sync**: MQTT do AWS IoT Core, dane 15-min + alarmy

**Koszt**: â‚¬5000 (hardware + licenses) + â‚¬50/miesiÄ…c (cloud uplink)
</SuccessBox>

<InstructorNotes>
PrzykÅ‚ad biogazowni pokazuje fog w akcji w bardziej zÅ‚oÅ¼onym Å›rodowisku niÅ¼ PV. Dell Edge Gateway 5100 to solidny sprzÄ™t przemysÅ‚owyâ€”8 GB RAM wystarczy na InfluxDB plus Python dla ARIMA. **OPC UA to Å›wietny wybÃ³Å‚ dla komunikacji z PLC Siemens**â€”strukturowane dane, tagi z typami i jednostkami, bezpieczeÅ„stwo wbudowane.

Historian ma dwie polityki retencji: **30 dni szczegÃ³Å‚owych danych 5-sekundowych** (dla analiz procesowych) i **rok danych 15-minutowych** (dla raportÃ³w compliance i trendÃ³w dÅ‚ugoterminowych). To inteligentne zarzÄ…dzanie storageâ€”szczegÃ³Å‚y tylko gdy potrzebne, agregaty dla dÅ‚ugiego okresu.

Analityka w czasie rzeczywistym: **OEE co godzinÄ™** (availability Ã— performance Ã— quality) to kluczowy KPI dla biogazowni. Detekcja anomalii: jeÅ›li CHâ‚„ spada poniÅ¼ej 50% przez dwie godziny, to sygnaÅ‚ problemÃ³w z fermentacjÄ…â€”alarm natychmiast. Prognoza ARIMA uruchamiana co 6 godzin przewiduje produkcjÄ™ na kolejne 24h, operator planuje interwencje w okienkach niskiej produkcji.

HMI lokalne na touchscreen 10 cali w control room to wygoda dla operatorÃ³wâ€”nie muszÄ… logowaÄ‡ siÄ™ do cloud, majÄ… wszystko na miejscu. Koszt 5000 euro to rozsÄ…dna inwestycja dla instalacji 1 MW. Studenci pytajÄ… o redundancjÄ™â€”dla instalacji powyÅ¼ej 10 MW zaleca siÄ™ active-standby fog servers.
</InstructorNotes>

</Slide>

<VisualSeparator type="energy" />

<Slide title="â˜ï¸ Warstwa Cloud: DÅ‚ugoterminowe skÅ‚adowanie i analityka zaawansowana" type="info">

<KeyPoints title="ğŸ¯ Funkcje warstwy Cloud">
- ğŸ’¾ **Long-term storage**: 5â€“10 lat danych, format Parquet, â‚¬0.01â€“0.03/GB/miesiÄ…c
- ğŸ“Š **Dashboardy biznesowe**: Power BI, Grafana Cloud dla stakeholders
- ğŸ¤– **Machine Learning**: Predykcja produkcji (XGBoost, LSTM), detekcja anomalii (PCA)
- ğŸ“ˆ **Benchmarking floty**: PorÃ³wnania KPI miÄ™dzy instalacjami w portfolio
- ğŸ”— **Integracja biznesowa**: ERP, CMMS, portale OSP
</KeyPoints>

<WarningBox>
**Cloud NIE jest dla real-time control!**

RTT do chmury publicznej: 50â€“200 ms + jitter. Zbyt wolne dla safety-critical logic. Cloud to **analityka, raportowanie, planowanie dÅ‚ugoterminowe**, nie kontrola procesu.
</WarningBox>

<InstructorNotes>
Cloud to **centralne repozytorium danych i platforma analityki zaawansowanej** dla wielu instalacji. MoÅ¼e byÄ‡ publiczny (AWS, Azure), prywatny lub hybrydowy. **DÅ‚ugoterminowe skÅ‚adowanie** to lata danych w formacie Parquetâ€”kompresja 10:1 vs CSV, koszty 0.01-0.03 euro za gigabajt miesiÄ™cznie.

Dashboardy w cloud to **widok biznesowy**, nie operacyjny. Dla inwestorÃ³w: produkcja vs plan, ROI. Dla O&M: Availability, MTBF. Dla OSP: raporty compliance. **Machine learning jest dojrzaÅ‚y**: XGBoost i LSTM przewidujÄ… produkcjÄ™ z bÅ‚Ä™dem poniÅ¼ej 5%, unsupervised learning wykrywa degradacje.

Benchmarking floty: ktÃ³ra farma ma najwyÅ¼szy PR? Transfer best practices miÄ™dzy obiektami. Fleet-wide alerts wykrywajÄ… problemy systemoweâ€”bug firmware w 10 farmach jednoczeÅ›nie. Kluczowy punkt: **cloud NIE moÅ¼e sterowaÄ‡ procesem real-time**. RTT 50-200 ms to zbyt wolne dla safety. Edge i fog muszÄ… dziaÅ‚aÄ‡ bez cloud przez tygodnie w island mode.
</InstructorNotes>

</Slide>

<VisualSeparator type="data" />

<Slide title="â˜ï¸ Cloud: Portfolio 50 MW" type="success">

<SuccessBox>
**Architektura cloud: 10 farm PV, Å‚Ä…cznie 50 MW**

**Platforma**: AWS (eu-central-1)

**Komponenty**:
- ğŸ“¡ **Ingestion**: AWS IoT Core (MQTT, 10 poÅ‚Ä…czeÅ„)
- ğŸ’¾ **Storage**: Timestream (7 dni) + S3 Standard-IA (5 lat Parquet)
- ğŸ¤– **Analytics**: Lambda (KPI co 15 min) + SageMaker (ML models)
- ğŸ“Š **Dashboards**: Grafana Cloud (live) + QuickSight (board reports)
- ğŸ”— **Integracja**: API Gateway do CMMS (Maximo), ERP (SAP)

**Koszty miesiÄ™czne**: ~â‚¬550 dla 50 MW = **â‚¬11/MW/miesiÄ…c**

**ROI**: Redukcja Availability spadkÃ³w o 0.5 pp = +â‚¬12 500/rok. Zwrot < 6 miesiÄ™cy âœ…
</SuccessBox>

<InstructorNotes>
Portfolio 50 MW pokazuje cloud w skali produkcyjnej. AWS Frankfurt to dobry wybÃ³râ€”niskie latencje, compliance GDPR. **IoT Core to managed MQTT broker**: 10 poÅ‚Ä…czeÅ„, po jednym na farmÄ™, tysiÄ…ce wiadomoÅ›ci na sekundÄ™.

Storage dwupoziomowy: **Timestream dla 7 dni hot data** i **S3 Standard-IA dla archiwum 5 lat** Parquet. Lifecycle policy automatycznie przenosi dane. Po roku do S3 Glacierâ€”retrieval 1-12h, OK dla audytÃ³w.

Analytics serverless: **Lambda oblicza KPI co 15 minut**, SageMaker trenuje modele ML. Grafana Cloud dla operacyjnych dashboardÃ³w, QuickSight dla boardâ€”miesiÄ™czne, kwartalne. **Koszty 550 euro miesiÄ™cznie dla 50 MW to zaledwie 11 euro na megawat**. ROI szybki: lepsza predykcja redukuje spadki Availability o 0.5 pp = +12 500 euro rocznie. Zwrot w pÃ³Å‚ roku. UÅ¼ywajcie open standards przeciw vendor lock-in.
</InstructorNotes>

</Slide>

<VisualSeparator type="technical" />

<Slide title="ğŸ”„ PrzepÅ‚yw danych: Widok caÅ‚oÅ›ciowy" type="info">

<KeyPoints title="ğŸ“Š Typowy przepÅ‚yw (normal operation)">
- 1ï¸âƒ£ **Czujniki â†’ Edge** (1â€“10 Hz, Modbus/OPC UA): Filtracja, walidacja, buforowanie
- 2ï¸âƒ£ **Edge â†’ Fog** (MQTT, co 1â€“15 min): Zagregowane wartoÅ›ci, zdarzenia, alarmy
- 3ï¸âƒ£ **Fog â†’ Cloud** (MQTT/REST, co 15 min): Agregaty 15-min, KPI, alarmy P1-P2
- 4ï¸âƒ£ **Cloud â†’ Stakeholders**: Dashboardy real-time (~30s delay), raporty historyczne, prognozy ML
</KeyPoints>

<SupportingDetails title="âš ï¸ Scenariusze awaryjne">
- ğŸ”Œ **Edge â†’ Fog offline**: Edge buforuje do 24h, synchronizacja po przywrÃ³ceniu
- ğŸ”Œ **Fog â†’ Cloud offline**: Fog przechowuje do 30 dni, alarmy lokalne dziaÅ‚ajÄ…
- ğŸ’” **Awaria Fog**: Edge wysyÅ‚a bezpoÅ›rednio do Cloud (jeÅ›li ma Å‚Ä…cznoÅ›Ä‡)
- â˜ï¸ **Awaria Cloud**: Edge+Fog dziaÅ‚ajÄ… normalnie (island mode), brak long-term analytics
</SupportingDetails>

<InstructorNotes>
PrzepÅ‚yw danych to **serce architektury**â€”musi dziaÅ‚aÄ‡ niezawodnie i degradowaÄ‡ gracefully przy awariach. Czujniki do edge: 1-10 Hz standardowo, 10-50 kHz dla CMS drganiowego. Edge filtruje, waliduje, normalizuje, buforuje. **MQTT to dominujÄ…cy protokÃ³Å‚ transportu**: lightweight, pub-sub, QoS levels.

Edge do fog co 1-15 minut: **zagregowane wartoÅ›ci** (Å›rednie, min, max), nie surowe pomiary. Redukcja ruchu dramatycznaâ€”1000 pomiarÃ³w 1-sekundowych do jednej Å›redniej 15-minutowej. Fog do cloud: dane 15-min plus KPI plus alarmy wysokiego priorytetu. Cloud do stakeholders: dashboardy z opÃ³Åºnieniem 30 sekund.

Scenariusze awaryjne sÄ… **kluczowe**. Edge traci fog? Buforuje 24h, synchronizuje pÃ³Åºniej. Fog traci cloud? Przechowuje 30 dni, alarmy dziaÅ‚ajÄ… lokalnie. **Awaria fog to problem**: edge wysyÅ‚a bezpoÅ›rednio do cloud, ale bez lokalnego HMI wymaga wizyty serwisu. Awaria cloud? Island modeâ€”proces kontrolowany, brak long-term analytics. PokaÅ¼cie diagram na rzutniku.

</InstructorNotes>

</Slide>

<VisualSeparator type="energy" />

<Slide title="âš–ï¸ Decyzje architektoniczne: OpÃ³Åºnienia i niezawodnoÅ›Ä‡" type="warning">

<KeyPoints title="âš¡ Latency Requirements">
- ğŸš¨ **Emergency stop**: < 10 ms â†’ **Edge only**
- âš ï¸ **Alarmy operacyjne**: < 1 s â†’ **Edge/Fog**
- ğŸ“Š **Dashboardy operacyjne**: < 10 s â†’ **Fog**
- ğŸ“ˆ **Raporty biznesowe**: < 1 min â†’ **Cloud** (akceptowalne)
</KeyPoints>

<WarningBox>
**Zasada: Im bliÅ¼ej procesu, tym bardziej krytyczne (safety)**

- Edge + Fog muszÄ… dziaÅ‚aÄ‡ **bez cloud** przez dniâ€“tygodnie (island mode)
- Edge musi dziaÅ‚aÄ‡ **bez fog** przez godziny (local buffering)
- **SPOF**: Redundancja dla fog w instalacjach > 10 MW
</WarningBox>

<InstructorNotes>
Decyzje architektoniczne to **balansowanie wielu czynnikÃ³w**: opÃ³Åºnienia, niezawodnoÅ›Ä‡, koszty, skalowalnoÅ›Ä‡. OpÃ³Åºnienia to gÅ‚Ã³wny driver layeringu. **Emergency stop musi reagowaÄ‡ w milisekundach**: AFCI w PV wykrywa Å‚uk i odcina string w < 10 ms. Fog (100-500 ms) i cloud (> 500 ms) sÄ… zbyt wolne dla safety.

Alarmy operacyjne tolerujÄ… sekundÄ™â€”edge lub fog wystarczÄ…. Dashboardy dla control room: 10 sekund OK, fog wystarcza. Raporty biznesowe? Minuta opÃ³Åºnienia akceptowalna, cloud idealny.

NiezawodnoÅ›Ä‡ to **graceful degradation**â€”kaÅ¼da warstwa musi dziaÅ‚aÄ‡ niezaleÅ¼nie. Edge plus fog bez cloud przez tygodnie: island mode, lokalna kontrola dziaÅ‚a. Edge bez fog przez godziny: local buffering. **Single Point of Failure to zagroÅ¼enie**: powyÅ¼ej 10 MW zaleca siÄ™ redundant fog servers active-standby. Koszt redundancji? Fog server 5-10 tysiÄ™cy euro, redundancja dodaje 50%, ale dla instalacji 10 MW wartej 10 milionÃ³w to margines bÅ‚Ä™du.

</InstructorNotes>

</Slide>

<VisualSeparator type="data" />

<Slide title="ğŸ’¾ Decyzje architektoniczne: Retencja danych" type="info">

<KeyPoints title="ğŸ“Š Strategia retencji danych (farma 10 MW)">
- ğŸ”¹ **Edge**: 1â€“10s, retencja 1â€“48h, 10 GB (RAM/flash)
- ğŸ”¸ **Fog**: 1â€“10s, retencja 7â€“30 dni, 500 GB (SSD/HDD)
- â˜ï¸ **Cloud**: 15-min aggregates, retencja 5â€“10 lat, 100 GB/rok (S3 compressed)
</KeyPoints>

<InfoBox>
**Lifecycle Policy (Cloud)**

Po 1 roku w S3 Standard â†’ archiwizacja do **S3 Glacier**
- Koszt: â‚¬0.004/GB/miesiÄ…c (vs â‚¬0.023 Standard)
- Retrieval time: 1â€“12h (akceptowalne dla audytÃ³w)
- OszczÄ™dnoÅ›Ä‡: ~80% kosztÃ³w storage po 1 roku
</InfoBox>

<InstructorNotes>
Koszt storage roÅ›nie liniowo z czasem i rozdzielczoÅ›ciÄ…â€”**planowanie retencji jest kluczowe dla kontroli budÅ¼etu**. Edge przechowuje 1-48h w RAM/flash, tylko 10 GB dla farmy 10 MW. Wystarczy do przeczekania przerw w Å‚Ä…cznoÅ›ci.

Fog trzyma szczegÃ³Å‚owe dane 7-30 dni na SSD/HDD, okoÅ‚o 500 GB. ZÅ‚oty Å›rodek: **wystarczajÄ…co dÅ‚ugo do analiz awarii**, wystarczajÄ…co krÃ³tko Å¼eby nie przepÅ‚acaÄ‡. Po 30 dniach agregacja do 15-minut i wysyÅ‚ka do cloud.

Cloud przechowuje agregaty 15-min przez 5-10 lat (compliance, audyty, refinansowanie). Parquet daje kompresjÄ™ 10:1 vs CSV. **Lifecycle policy to must-have**: po roku automatyczna archiwizacja do Glacierâ€”oszczÄ™dnoÅ›Ä‡ 80%, retrieval 1-12h OK dla audytÃ³w.

Dlaczego nie trzymaÄ‡ wszystkiego na zawsze? Storage to ongoing expense. 1 TB w S3 Standard-IA to 10-30 euro miesiÄ™cznie. Razy lata, razy skalaâ€”koszty rosnÄ… szybko. **Inteligentna retencja to oszczÄ™dnoÅ›ci bez utraty wartoÅ›ci**.

</InstructorNotes>

</Slide>

<VisualSeparator type="technical" />

<Slide title="ğŸ”§ Decyzje architektoniczne: Standardy i skalowalnoÅ›Ä‡" type="tip">

<KeyPoints title="ğŸŒ Otwarte standardy (przeciw vendor lock-in)">
- ğŸ“¡ **ProtokoÅ‚y**: OPC UA (IEC 62541), MQTT (ISO/IEC 20922), Modbus (de facto)
- ğŸ“„ **Formaty**: InfluxDB Line Protocol, JSON, Parquet (columnar, compressed)
- ğŸ”— **APIs**: REST (integrations), GraphQL (flexible queries)
</KeyPoints>

<SupportingDetails title="ğŸ’° Koszty i skalowalnoÅ›Ä‡ (CapEx vs OpEx)">
- **< 1 MW**: Cloud-first, CapEx ~â‚¬1k, OpEx ~â‚¬500/rok
- **1â€“10 MW**: Hybrid (fog+cloud), CapEx ~â‚¬10-30k, OpEx ~â‚¬2k/rok
- **> 100 MW**: Private cloud, CapEx ~â‚¬500k, OpEx ~â‚¬50k/rok
</SupportingDetails>

<WarningBox>
Przy wyborze komponentÃ³w pytaj: **"Co siÄ™ stanie, gdy za 5 lat producent przestanie istnieÄ‡?"** JeÅ›li odpowiedÅº = "musimy przepisaÄ‡ wszystko", wybierz open-source lub otwarte API.
</WarningBox>

<InstructorNotes>
Standaryzacja interfejsÃ³w to **ubezpieczenie przeciw vendor lock-in**â€”najwiÄ™kszemu dÅ‚ugoterminowemu zagroÅ¼eniu. Preferujcie otwarte standardy: **OPC UA dla structured data** (tagi z typami, jednostkami), **MQTT dla lightweight telemetry** (pub-sub, QoS), **Modbus wciÄ…Å¼ dominujÄ…cy w PV/wiatr**.

Formaty danych: InfluxDB Line Protocol prosty i human-readable. JSON uniwersalny ale verboseâ€”nie dla high-frequency. **Parquet columnar i compressed idealny dla cloud**: kompresja 10:1, szybkie queries na kolumnach.

Koszty i skalowalnoÅ›Ä‡ to trade-off CapEx vs OpEx. **MaÅ‚e < 1 MW**: cloud-first, niski CapEx (1000 euro), wyÅ¼szy OpEx (500 rocznie). **Åšrednie 1-10 MW**: hybrid fog plus cloud, CapEx 10-30k, OpEx 2000 rocznie. **DuÅ¼e > 100 MW**: private cloud on-premise, wysoki CapEx (500k), najniÅ¼szy OpEx long-term (50k rocznie).

"Co za 5 lat gdy producent software padnie?" JeÅ›li odpowiedÅº "przepisujemy wszystko", to ZÅY wybÃ³r. Open-source i otwarte API to insurance policy.

</InstructorNotes>

</Slide>

<VisualSeparator type="energy" />

<Slide title="ğŸ“ Podsumowanie: Architektura edge-fog-cloud" type="success">

<KeyPoints title="ğŸ”‘ Kluczowe wnioski">
- ğŸ”¹ **Edge**: SzybkoÅ›Ä‡ reakcji (< 100 ms), safety-critical logic, buffering
- ğŸ”¸ **Fog**: Kontekst lokalny, agregacja, near-RT analytics, resilience (island mode)
- â˜ï¸ **Cloud**: Long-term analytics, ML/AI, benchmarking, integracja biznesowa
- ğŸ”„ **KaÅ¼da warstwa niezaleÅ¼na**: Graceful degradation przy awariach
- ğŸŒ **Otwarte standardy**: Ochrona przed vendor lock-in
</KeyPoints>

<SuccessBox>
**Zasady projektowania**

1. **Safety-critical logic**: Edge/Fog only (< 100 ms latency)
2. **Operational analytics**: Fog (real-time HMI, KPI)
3. **Strategic analytics**: Cloud (ML, fleet management, reporting)
4. **Resilience**: Edge+Fog muszÄ… dziaÅ‚aÄ‡ bez Cloud przez tygodnie
5. **Koszty**: Agreguj w Fog (nie wysyÅ‚aj raw data do Cloud)
</SuccessBox>

<InstructorNotes>
Zbieramy wszystko w caÅ‚oÅ›Ä‡. **Architektura edge-fog-cloud to best practice**, bo kaÅ¼da warstwa rozwiÄ…zuje konkretny problem biznesowy i techniczny. Edge zapewnia szybkoÅ›Ä‡ reakcji milisekundowÄ… dla safety. Fog dostarcza kontekst lokalnyâ€”widzi wszystkie urzÄ…dzenia, wykonuje near-RT analytics, dziaÅ‚a w island mode. Cloud umoÅ¼liwia long-term analytics, ML/AI, benchmarking fleet, integracjÄ™ ERP/CMMS.

Kluczowa lekcja: **kaÅ¼da warstwa musi dziaÅ‚aÄ‡ niezaleÅ¼nie**. To requirement, nie nice-to-have. Graceful degradationâ€”utrata cloud nie paraliÅ¼uje kontroli, utrata fog nie blokuje alarmÃ³w. **Safety-critical logic zawsze lokalnie**: emergency stop, AFCI, interlockâ€”edge lub fog, nigdy cloud.

Otwarte standardy to ubezpieczenie: OPC UA, MQTT, Modbus, Parquet. Za 5-10 lat producent moÅ¼e nie istnieÄ‡, standardy pozostajÄ…. Koszty kontrolujemy agregacjÄ… w fog: **nie wysyÅ‚amy surowych danych 1-sekundowych**, tylko agregaty 15-min. Redukcja ruchu 900-krotna. ZapowiedÅº: nastÄ™pna sekcja to typy danych i ÅºrÃ³dÅ‚a w instalacjach OZEâ€”co mierzymy, z jakich urzÄ…dzeÅ„, w jakich formatach.

</InstructorNotes>

</Slide>

</SlideContainer>

---

## ğŸ“š MateriaÅ‚y uzupeÅ‚niajÄ…ce

PeÅ‚na treÅ›Ä‡ wykÅ‚adu z rozszerzonymi wyjaÅ›nieniami, przykÅ‚adami i szczegÃ³Å‚ami dostÄ™pna jest w pliku: [02-warstwy-architektury.mdx](./02-warstwy-architektury.mdx)

### Diagramy
- PeÅ‚ny diagram przepÅ‚ywu danych Mermaid (edge â†’ fog â†’ cloud)
- Model Purdue ISA-95 z mapowaniem do OZE

### Literatura
- IEC 62541: OPC Unified Architecture
- ISO/IEC 20922: MQTT Protocol
- IEC 62443: Industrial automation and control systems security
- ISA-95: Enterprise-Control System Integration

### PrzykÅ‚ady konfiguracji
- Raspberry Pi + HAT Modbus dla edge gateway
- Dell Edge Gateway 5100 dla fog w biogazowni
- AWS IoT Core architecture dla cloud portfolio

### NarzÄ™dzia
- **Edge**: Raspberry Pi, Moxa UC-8100, Siemens IOT2040
- **Fog**: Ignition SCADA, InfluxDB, Grafana, Node-RED
- **Cloud**: AWS IoT Core, Azure IoT Hub, Google Cloud IoT

